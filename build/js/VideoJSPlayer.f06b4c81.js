(self.webpackChunkHM_Starter=self.webpackChunkHM_Starter||[]).push([["VideoJSPlayer"],{51302:function(e,t,s){"use strict";s.r(t),s.d(t,{VideoJSPlayer:function(){return u}});var i=s(32668),o=(s(83514),s(85258),s(3342)),a=s(66358),r=s(72723),l=s(51922),n=s(25108);window.videojs=i.default,s(7923);class u{_player;DOMVideo_;element_;mouse_;DOMPlayButton_;DOMVideoLayer_;DOMLayerCloseButton_;DOMVolumeBar;subsCapsButton_;RectCloseButton_;DOMWatchTrailerLinks;controlBarDom;controlBarHovered=!1;defaultToHls=i.default.browser.IS_ANY_SAFARI;firstSourceChange=!0;_parent;constructor(e,t=null){this.element_=e.querySelector(".videoWrapper"),this.DOMVideo_=this.element_.querySelector(".videoWrapper video"),this.DOMWatchTrailerLinks=e.querySelectorAll(".watchTrailer"),this.DOMPlayButton_=this.element_.querySelector(".playButton"),this.DOMVideoLayer_=this.element_.querySelector(".VideoLayer"),this.DOMLayerCloseButton_=this.element_.querySelector(".closeLayerButton"),this.mouse_={x:0,y:0},o.Globals.IS_TOUCH_DEVICE&&a.default.set(this.DOMPlayButton_,{display:"none"}),t&&(this._parent=t),this.resize(),this.initPlayer()}changeVideo(e){const t=this;t.element_.querySelector(".video-title").innerText=e.title,t._player.src(e.sources);const s=Array.from(e.tracks);s.map(((e,t)=>({kind:e.kind,label:e.label,id:"mp4_source"+t,srclang:e.srclang,src:e.src})));if(this.defaultToHls)for(let e=0;e<s.length;e++)s[e].remove();const i=this._player.remoteTextTracks();for(let e=0;e<i.length;e++)this._player.removeRemoteTextTrack(i[e]);t.onThumbnailClick()}initPlayer(){const e=Array.from(this.DOMVideo_.querySelectorAll("source")).map((e=>({src:e.dataset.src,type:e.type,res:e.getAttribute("res"),label:e.getAttribute("label")}))),t=Array.from(this.DOMVideo_.querySelectorAll("track")),s=t.map(((e,t)=>({kind:e.kind,label:e.label,id:"mp4_source"+t,srclang:e.srclang,src:e.src})));if(this.defaultToHls)for(let e=0;e<t.length;e++)t[e].remove();this._player=(0,i.default)(this.DOMVideo_,{sources:e,html5:{nativeControlsForTouch:!0},plugins:{videoJsResolutionSwitcher:{default:this.defaultToHls?"high":876,dynamicLabel:!0},httpSourceSelector:{default:"high"}},textTrackSettings:!1,captions:!0,autoplay:!1,controlBar:{playToggle:!1,captionsButton:!1,chaptersButton:!1,subtitlesButton:!1,remainingTimeDisplay:!1,currentTime:!1,progressControl:{seekBar:!0},seekToLive:!1,pictureInPictureToggle:!1,liveDisplay:!1,durationDisplay:!1,currentTimeDisplay:!1,timeDivider:!1,playbackRateMenuButton:!1,customControlSpacer:!1,descriptionsButton:!1,audioTrackButton:!1},errorDisplay:!0},(()=>{this._player.addClass("video-trailer"),this.subsCapsButton_=this.element_.querySelector(".vjs-subs-caps-button .vjs-control-text"),this.subsCapsButton_.innerText="CC";var e=this._player.remoteTextTracks(),t=this.defaultToHls;this._player.on("resolutionchange",(()=>{const i=this._player.src();if(this._player.paused()&&this.DOMPlayButton_.classList.remove("is-playing"),i.indexOf(".m3u8")>=0){t=!0;for(var o=e.length-1;o>=0;o--)(e[o].id.indexOf("mp4_source")>=0||e[o].src)&&this._player.removeRemoteTextTrack(e[o])}else t&&(s.forEach((e=>this._player.addRemoteTextTrack(e))),t=!1);if(!this.firstSourceChange)try{this._player.play()}catch(e){n.log("cannot autoresume playback")}this.firstSourceChange=!1}));const i=this._player.controlBar.addChild("Component",{},0);i.addClass("video-title"),i.el_.innerText=this.element_.dataset.videoTitle;const o=this._player.controlBar.getChild("VolumePanel").addChild("Component",{},0);o.addClass("volumeBars"),this.DOMVolumeBar=[],new Array(4).fill(0).forEach((()=>{const e=o.addChild("Component",{},0);e.addClass("bar"),this.DOMVolumeBar.push(e.el_)}));this._player.controlBar.getChild("FullscreenToggle").addChild("ClickableComponent",{},0).addClass("fullscreen-icon"),this.controlBarDom=this.element_.querySelector(".vjs-control-bar"),this.DOMWatchTrailerLinks.forEach((e=>e.addEventListener("click",this.onThumbnailClick))),"#trailer"===window.location.hash&&this.onThumbnailClick()}))}bindEvents=()=>{this._player.on("play",this.onPlay),this._player.on("pause",this.onPause),this._player.on("useractive",this.onUserActive),this._player.on("userinactive",this.onUserInactive),this._player.on("volumechange",this.onVolumeChange),this.DOMLayerCloseButton_.addEventListener("click",this.onCloseButtonClick),this.controlBarDom.addEventListener("mouseenter",this.menuMouseOver),this.controlBarDom.addEventListener("mouseleave",this.menuMouseOut),o.Globals.IS_TOUCH_DEVICE||window.addEventListener("mousemove",this.mouseMove_)};menuMouseOver=()=>{this.controlBarHovered=!0};menuMouseOut=()=>{this.controlBarHovered=!1};unbindEvents=()=>{this._player.off("play",this.onPlay),this._player.off("pause",this.onPause),this._player.off("useractive",this.onUserActive),this._player.off("userinactive",this.onUserInactive),this._player.off("volumechange",this.onVolumeChange),this.DOMLayerCloseButton_.removeEventListener("click",this.onCloseButtonClick),this.controlBarDom.removeEventListener("mouseenter",this.menuMouseOver),this.controlBarDom.removeEventListener("mouseleave",this.menuMouseOut),o.Globals.IS_TOUCH_DEVICE||window.removeEventListener("mousemove",this.mouseMove_)};onVolumeChange=()=>{this._player.muted()?this.reset():this.randomizeVolumeBar()};randomizeVolumeBar=()=>{this.DOMVolumeBar.forEach(((e,t)=>{this.animBar(e)}))};onCloseButtonClick=()=>{history.replaceState(void 0,void 0," "),this._player.pause(),this.unbindEvents(),r.GlobalsLanding.AmbientAudio&&r.GlobalsLanding.AmbientAudio.resume(),r.GlobalsLanding.VIDEO_OPEN=!1,a.default.to(this.element_,{autoAlpha:0,pointerEvents:""}),this._parent&&this._parent.onClose&&this._parent.onClose(),l.tracking.trackClick("trailer","close")};onThumbnailClick=(e=null)=>{e&&e.preventDefault(),this.bindEvents(),r.GlobalsLanding.AmbientAudio&&r.GlobalsLanding.AmbientAudio.stop();try{this._player.play()}catch(e){n.warn(e)}return a.default.to(this.element_,{autoAlpha:1,pointerEvents:"auto",onComplete:()=>{r.GlobalsLanding.VIDEO_OPEN=!0}}),l.tracking.trackClick("trailer_thumbnail","play_trailer"),!1};reset(){this.DOMVolumeBar.forEach(((e,t)=>{a.default.killTweensOf(e)})),a.default.to(this.DOMVolumeBar,{duration:.3,scaleY:1,force3D:!0})}animBar=e=>{a.default.to(e,{duration:a.default.utils.random(.1,.3),scaleY:a.default.utils.random(1,4),repeat:1,force3D:!0,ease:"sine.inOut",yoyo:!0,onComplete:()=>{this.animBar(e)}})};onPlay=()=>{this.DOMPlayButton_.classList.add("is-playing"),this._player.muted()||this.randomizeVolumeBar(),this._parent&&this._parent.onPlay&&this._parent.onPlay,l.tracking.trackClick("trailer","play")};onPause=()=>{this.DOMPlayButton_.classList.remove("is-playing"),this.DOMVolumeBar.forEach(((e,t)=>{a.default.killTweensOf(e)})),this._parent&&this._parent.onPause&&this._parent.onPause(),l.tracking.trackClick("trailer","pause")};onUserInactive=()=>{this.DOMPlayButton_.classList.add("user-inactive")};onUserActive=()=>{this.DOMPlayButton_.classList.remove("user-inactive")};mouseMove_=e=>{this.mouse_.x=e.clientX,this.mouse_.y=e.clientY,a.default.to(this.DOMPlayButton_,{duration:.2,ease:"none",x:this.mouse_.x,y:this.mouse_.y}),this.controlBarHovered||this.mouse_.y>this._player.controlBar.el().getBoundingClientRect().top-100||this.mouse_.x>this.RectCloseButton_.x-100&&this.mouse_.y<this.RectCloseButton_.y+100?this.onUserInactive():this.onUserActive()};kill=()=>{this._player&&this._player.dispose(),this.DOMWatchTrailerLinks.forEach((e=>e.removeEventListener("click",this.onThumbnailClick))),this.unbindEvents()};resize(){this.RectCloseButton_=this.DOMLayerCloseButton_.getBoundingClientRect()}}},25893:function(){}}]);
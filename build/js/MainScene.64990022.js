/*! For license information please see MainScene.64990022.js.LICENSE.txt */
"use strict";(self.webpackChunkHM_Starter=self.webpackChunkHM_Starter||[]).push([["MainScene"],{42596:function(t,e,i){i.r(e),i.d(e,{MainScene:function(){return Ft}});i(76142);var o=i(2212),s=i(15079),a=i(94268),n=(i(91181),i(32248));class r{composer;scene;camera;menu;renderer;enabled=!1;smaaPass;smaaEffect;godRaysEffect;noiseEffect;godrayPass;clock;standardPass;_godRaysEnabled=!0;get godRaysEnabled(){return this._godRaysEnabled}set godRaysEnabled(t){this._godRaysEnabled=t,this._godRaysEnabled?(this.composer.removePass(this.standardPass),this.composer.addPass(this.godrayPass),this.standardPass.enabled=!1,this.godrayPass.enabled=!0):(this.godrayPass.enabled=!1,this.standardPass.enabled=!0,this.composer.removePass(this.godrayPass),this.composer.addPass(this.standardPass))}constructor(t,e,i,o,s,a=!0){this.clock=s,this.scene=t,this.camera=e,this.renderer=i,this.menu=o,this.enabled=a,this.composer=new n.EffectComposer(this.renderer);var r=new n.RenderPass(this.scene,this.camera);r.renderToScreen=!1,this.composer.addPass(r),this.noiseEffect=new n.NoiseEffect({blendFunction:n.BlendFunction.MULTIPLY});const u=this.noiseEffect.blendMode,l={enabled:this.enabled,abberationEnabled:!1,noiseEnabled:!0,noiseOpacity:.1,abberationOffsetX:.001,abberationOffsetY:5e-4,"noise blend mode":u.blendFunction};o&&(o.add(l,"enabled").onChange((t=>{l.enabled=t,this.enabled=t})),o.add(l,"noise blend mode",n.BlendFunction).onChange((t=>{this.noiseEffect.blendMode.setBlendFunction(Number(t))}))),this.noiseEffect.blendMode.opacity.value=l.noiseOpacity,o&&o.add(l,"noiseOpacity").min(0).max(1).step(1e-4).onChange((t=>{this.noiseEffect.blendMode.opacity.value=t}))}setupGodRaysAndSmaa(t,e){const i=new n.GodRaysEffect(this.camera,t,{height:480,kernelSize:n.KernelSize.SMALL,density:.8,decay:.9,weight:.7,exposure:.9,samples:35,clampMax:1});this.godRaysEffect=i,this.godrayPass=new n.EffectPass(this.camera,i,this.noiseEffect),this.standardPass=new n.EffectPass(this.camera,this.noiseEffect),this.composer.addPass(this.godrayPass);const s=i.godRaysMaterial.uniforms,a=i.blendMode,r=new o.Color,u={resolution:i.height,blurriness:i.blurPass.kernelSize+0,density:s.density.value,decay:s.decay.value,weight:s.weight.value,exposure:s.exposure.value,clampMax:s.clampMax.value,samples:i.samples,color:r.copyLinearToSRGB(t.material.color).getHex(),opacity:a.opacity.value,"blend mode":a.blendFunction};if(this.menu){let o=this.menu.addFolder("Eye Godrays");o.add(u,"resolution",[240,360,480,720,1080]).onChange((t=>{i.resolution.height=Number(t)})),o.add(this.godrayPass,"dithering"),o.add(u,"blurriness").min(n.KernelSize.VERY_SMALL).max(n.KernelSize.HUGE+1).step(1).onChange((t=>{i.blur=t>0,i.blurPass.kernelSize=t-1})),o.add(u,"density").min(0).max(1).step(.01).onChange((t=>{s.density.value=t})),o.add(u,"decay").min(0).max(1).step(.01).onChange((t=>{s.decay.value=t})),o.add(u,"weight").min(0).max(1).step(.01).onChange((t=>{s.weight.value=t})),o.add(u,"exposure").min(0).max(1).step(.01).onChange((t=>{s.exposure.value=t})),o.add(u,"clampMax").min(0).max(1).step(.01).onChange((t=>{s.clampMax.value=t})),o.add(i,"samples").min(15).max(200).step(1),o.addColor(u,"color").onChange((i=>{t.material.color.setHex(i).convertSRGBToLinear(),e.color.setHex(i).convertSRGBToLinear()})),o.add(u,"opacity").min(0).max(1).step(.01).onChange((t=>{a.opacity.value=t})),o.add(u,"blend mode",n.BlendFunction).onChange((t=>{a.setBlendFunction(Number(t))})),o.add(t.position,"x").min(-10).max(10).step(.001).onChange((e=>{t.position.x=e,t.updateMatrix()})),o.add(t.position,"y").min(-10).max(10).step(.001).onChange((e=>{t.position.y=e,t.updateMatrix()})),o.add(t.position,"z").min(-10).max(10).step(.001).onChange((e=>{t.position.z=e,t.updateMatrix()}))}return i}render(){this.composer.render(this.clock.getDelta())}}class u{camera;totalProgress=0;initialized=!1;progress={startFOV:15,endFOV:110,focusZ:-200,endZ:-110};currentFOV=-1;initDepth=0;_cameraLookAtObject;_cameraLookAtPoint=new o.Vector3;constructor(t,e){this.camera=t,this._cameraLookAtObject=e}init(){this.camera.position.z=this.progress.focusZ,this.initDepth=2*Math.tan(this.progress.startFOV/2*Math.PI/180)}update(t,e,i,o){this.initialized||(this.initialized=!0,this.progress={startFOV:i||this.camera.fov,endFOV:t,focusZ:this.camera.position.z,endZ:this.camera.position.z+e},this.init()),this.currentFOV=this.progress.startFOV+(this.progress.endFOV-this.progress.startFOV)*(o||this.totalProgress);let s=2*Math.tan(this.currentFOV/2*Math.PI/180);this.camera.position.z=this.progress.endZ+(this.progress.focusZ-this.progress.endZ)*this.initDepth/s,this.camera.fov=this.currentFOV}getValues(t){this.currentFOV=this.progress.startFOV+(this.progress.endFOV-this.progress.startFOV)*t;let e=2*Math.tan(this.currentFOV/2*Math.PI/180);return{fov:this.currentFOV,z:this.progress.endZ+(this.progress.focusZ-this.progress.endZ)*this.initDepth/e}}convertFovToZ(t){return 1/(2*this.camera.aspect*Math.tan(t/2*(Math.PI/180)))}convertZToFov(t){return 2*Math.atan2(1,2*this.camera.aspect*t)*(180/Math.PI)}}var l=i(66358),h=i(49092),p=i(49127),c=i(52216),d=i(69365),m=(i(79665),i(95767),i(72723));function D(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function g(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var y=0;class C extends o.ShaderMaterial{static texCircleSolid;static texCircleAlpha;constructor(t,e=null,i=""){var s={focusNear:9.14,focusFar:11.34,focusFadeOutLength:1,maxBlur:.34,minBlur:.14,minOpacity:.02,maxOpacity:.8,useFocusCenter:!1,focusCenter:8,focusLength:4,radiusScaleFactor:1};t&&(s=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?D(Object(i),!0).forEach((function(e){g(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},s,{},t));let a={viewport:{value:m.GlobalsLanding.RENDERER_HEIGHT/1e3},PIXEL_RATIO:{value:m.GlobalsLanding.RENDERER_PIXEL_RATIO},focusNear:{value:s.focusNear},focusFar:{value:s.focusFar},focusFadeOutLength:{value:s.focusFadeOutLength},maxBlur:{value:s.maxBlur},minBlur:{value:s.minBlur},radiusScaleFactor:{value:s.radiusScaleFactor},minOpacity:{value:s.minOpacity},maxOpacity:{value:s.maxOpacity},color:{value:new o.Color(16777215)},pointTexture:{value:C.texCircleSolid},pointTextureAlpha:{value:C.texCircleAlpha}};if(window.addEventListener("resize",(()=>{a.viewport.value=m.GlobalsLanding.RENDERER_HEIGHT/1e3})),super({uniforms:a,depthWrite:!1,vertexShader:"attribute float size;\n            attribute vec3 customColor;\n\n            varying vec3 vColor;\n            varying float vAlpha;\n//            varying float vBlur;\n            uniform float focusNear;\n            uniform float PIXEL_RATIO;\n            uniform float focusFar;\n            uniform float maxBlur;\n            uniform float minBlur;\n            uniform float minOpacity;\n            uniform float maxOpacity;\n            uniform float focusFadeOutLength;\n            uniform float viewport;\n            uniform float radiusScaleFactor;\n\n            void main() {\n\n                vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n\n                //float sizeCalc = smoothstep(focusNear, focusFar, -mvPosition.z);\n                float sizeCalc = 1.0;\n\n                if (-mvPosition.z < focusNear) {\n                    sizeCalc = smoothstep(focusNear - focusFadeOutLength, focusNear, -mvPosition.z);\n                    //                    sizeCalc = 0.0;\n                }\n                if (-mvPosition.z > focusFar) {\n                    sizeCalc = smoothstep(focusFar + focusFadeOutLength, focusFar, -mvPosition.z);\n                }\n                //\t\t\t\tgl_PointSize = size * ( focusNear / -mvPosition.z );\n                //                gl_PointSize = size;\n                sizeCalc = 1.0 - sizeCalc;\n                //gl_PointSize = size;\n\n                //                gl_PointSize *= ( scale / - mvPosition.z );\n                //                gl_PointSize = (size * minBlur + (size * maxBlur * sizeCalc));\n                //                vAlpha = clamp(sin(1.0 - ( focusNear / -mvPosition.z )), 0.05, 1.0);\n                vAlpha = min(max((1.0 - sizeCalc) * maxOpacity, minOpacity), maxOpacity);\n//                vAlpha = clamp(minOpacity, maxOpacity, (1.0 - sizeCalc) * maxOpacity); //Clamp has a bug in safari and iOS\n//                vBlur = 1.0 - sizeCalc;\n//                vBlur = 1.0;\n                if (vAlpha < 0.0001) {\n                    //This makes the GPU cull the vertex, increasing performance for non-visibe points:\n                    gl_PointSize = 0.0;\n                    gl_Position.z = 0.0;\n                } else {\n                    gl_PointSize = (viewport * (size * PIXEL_RATIO * minBlur + (size * PIXEL_RATIO * maxBlur * sizeCalc))) * radiusScaleFactor;\n                    gl_Position = projectionMatrix * mvPosition;\n                    vColor = customColor;\n                }\n                ".concat("",";\n\n            }"),fragmentShader:"\n                uniform vec3 color;\n                uniform sampler2D pointTexture;\n                uniform sampler2D pointTextureAlpha;\n\n                varying vec3 vColor;\n                varying float vAlpha;\n//                varying float vBlur;\n\n                //            vec4 mapTexelToLinear( vec4 value ) { return LinearToLinear( value) ; }\n                void main() {\n                    /*\n                                    if(vAlpha == 0.0) {\n                                        discard;\n                                    }*/\n\n                    vec4 tColor = texture2D(pointTexture, gl_PointCoord);\n                    vec4 tColorAlpha = texture2D(pointTextureAlpha, gl_PointCoord);\n\n                    //gl_FragColor = vec4(color * vColor / tColor.a, mix(tColorAlpha.a, tColor.a, vAlpha) * vAlpha) * tColor;\n\n                    //Equation from: http://eelpi.gotdns.org/blog.wiki.html [Premultiplied alpha]\n                    tColor.rgb = tColor.rgb + tColor.rgb * (1.0 - tColor.a);\n                    tColorAlpha.rgb = tColorAlpha.rgb + tColorAlpha.rgb * (1.0 - tColorAlpha.a);\n//                    gl_FragColor = vec4(vColor, mix(tColorAlpha.a, tColor.a, vBlur) * vAlpha);\n                    gl_FragColor = vec4(vColor, mix(tColorAlpha.a, tColor.a, vAlpha) * vAlpha);\n\n                }",transparent:!0}),this.dofParams=s,e){y++;let t=e.addFolder("DOFPointsMaterial "+i+y);t.add(this.dofParams,"focusNear").min(.01).max(200).step(.001).onChange((t=>{this.uniforms.focusNear.value=t})),t.add(this.dofParams,"focusFar").min(.01).max(200).step(.001).onChange((t=>{this.uniforms.focusFar.value=t})),t.add(this.dofParams,"focusFadeOutLength").min(.01).max(100).step(.001).onChange((t=>{this.uniforms.focusFadeOutLength.value=t})),t.add(this.dofParams,"minBlur").min(.001).max(2).step(.01).onChange((t=>{this.uniforms.minBlur.value=t})),t.add(this.dofParams,"maxBlur").min(.1).max(2).step(.01).onChange((t=>{this.uniforms.maxBlur.value=t})),t.add(this.dofParams,"minOpacity").min(0).max(1).step(.001).onChange((t=>{this.uniforms.minOpacity.value=t})),t.add(this.dofParams,"radiusScaleFactor").min(0).max(1e3).step(.001).onChange((t=>{this.uniforms.radiusScaleFactor.value=t})),t.add(this.dofParams,"maxOpacity").min(0).max(1).step(.001).onChange((t=>{this.uniforms.maxOpacity.value=t})),t.add(this.dofParams,"useFocusCenter").onChange((t=>{this.dofParams.useFocusCenter=t,this.updateFocusCenter()})),t.add(this.dofParams,"focusCenter").min(0).max(30).step(.001).onChange((t=>{this.focusCenter=t})),t.add(this.dofParams,"focusLength").min(0).max(100).step(.001).onChange((t=>{this.focusLength=t}))}this.updateFocusCenter()}dofParams;updateFocusCenter(){this.dofParams.useFocusCenter?(this.uniforms.focusNear.value=this.dofParams.focusCenter-.5*this.dofParams.focusLength,this.uniforms.focusFar.value=this.dofParams.focusCenter+.5*this.dofParams.focusLength):(this.uniforms.focusNear.value=this.dofParams.focusNear,this.uniforms.focusFar.value=this.dofParams.focusFar)}get focusCenter(){return this.dofParams.focusCenter}set focusCenter(t){this.dofParams.focusCenter=t,this.updateFocusCenter()}get focusLength(){return this.dofParams.focusLength}set focusLength(t){this.dofParams.focusLength=t,this.updateFocusCenter()}}class f{geometry=new o.BufferGeometry;material;points;constructor(t,e=.01,i=8,s=0,a=2*Math.PI,n,r="ring",u=new o.Color(524802),l=null,h=null){this.buildGeometry(e,i,s,a,u),this.material=h||new C("poi ring"===r?{focusNear:10,focusFar:40,focusFadeOutLength:50,minBlur:.07,minOpacity:0,maxOpacity:.8,maxBlur:.2}:l||{focusNear:30,focusFar:60,focusFadeOutLength:50,minBlur:.1,minOpacity:0,maxOpacity:.55,maxBlur:.11},n,r),this.points=new o.Points(this.geometry,this.material),t.add(this.points)}buildGeometry(t,e,i,s,a){e=Math.max(3,e);const n=new o.Vector3,r=[],u=new Float32Array(e),l=[];for(let o=0;o<e;o++){const h=i+o/e*s;n.x=t*Math.cos(h),n.y=t*Math.sin(h),r.push(n.x,n.y,n.z),l.push(a.r,a.g,a.b),u[o]=50}this.geometry.setAttribute("customColor",new o.Float32BufferAttribute(l,3)),this.geometry.setAttribute("position",new o.Float32BufferAttribute(r,3)),this.geometry.setAttribute("size",new o.BufferAttribute(u,1)),this.geometry.computeBoundingSphere()}}class F{group=new o.Object3D;pointCloudContainer=new o.Object3D;ringsGroup=new o.Group;rings=[];menu;pointCloud;sun;eye;godraysEffect;postEffects;texture;pointCloudBelt;constructor(t,e,i,s){this.postEffects=e,this.menu=i;var a=new o.Color(15384750).convertSRGBToLinear();const n=new o.PointLight(a);n.position.set(.36,-2.454,0);const r=new o.MeshBasicMaterial({color:a,transparent:!0,fog:!1}),u=new o.SphereBufferGeometry(1.5,32,32);this.sun=new o.Mesh(u,r),this.sun.position.copy(n.position),this.sun.updateMatrix(),this.sun.frustumCulled=!1,this.sun.matrixAutoUpdate=!1,this.sun.name="sun",this.group.add(this.pointCloudContainer),this.group.add(this.ringsGroup),this.group.add(this.sun),this.godraysEffect=e.setupGodRaysAndSmaa(this.sun,n),t.add(this.group),this.texture=s.loadTexture("eye_texture.jpg"),s.loadGLTF("eye_singular.glb",this.eyeGeometryLoaded),s.addLoadItem({path:"particles/eye.drc",name:"eye_particles",doneCallback:this.setupGeometry})}eyeGeometryLoaded=t=>{this.createRings(),this.eye=t.scene.children[0],this.eye.name="eye",this.group.add(this.eye),this.group.rotation.x=-.961,this.group.rotation.y=-.08,this.group.rotation.z=.2,this.group.position.x=-.11,this.group.position.y=.83,this.group.position.z=-298,this.eye.material=new o.MeshStandardMaterial({metalness:.12,roughness:.55,color:7899597,transparent:!0,opacity:.97,map:this.texture,flatShading:!1}),this.texture.center.x=.5,this.texture.center.y=.5,this.texture.repeat.set(4,4),this.menu&&this.menu.add(this.texture.repeat,"x").min(1).max(10).step(.01).onChange((t=>{this.texture.repeat.x=t,this.texture.repeat.y=t})),l.gsap.to(this.texture,{rotation:2*-Math.PI,ease:"none",repeat:-1,duration:200});this.eye.material};setupGeometry=(t,e,i)=>{var s=new C({useFocusCenter:!0,focusLength:12.58,focusCenter:15.023,focusFadeOutLength:6,minOpacity:0,maxOpacity:.534,maxBlur:.15,minBlur:.05,radiusScaleFactor:.006},this.menu,i);this.pointCloudBelt=new o.Points(t,s),this.pointCloudBelt.renderOrder=1,this.pointCloudBelt.scale.set(.001,.001,.001),this.group.add(this.pointCloudBelt),l.gsap.to(this.pointCloudBelt.rotation,{y:2*Math.PI,repeat:-1,yoyo:!1,ease:"none",duration:200}),this.pointCloudBelt.name=i};getIntroAnimation(t=6){const e=l.gsap.timeline();return e.fromTo(this.sun.position,{x:-.5,y:-.72},{x:this.sun.position.x,y:this.sun.position.y,duration:t,onUpdate:()=>this.sun.updateMatrix()},0),e.from(this.godraysEffect.godRaysMaterial.uniforms.weight,{value:1,duration:1,ease:"power3.inOut"},0),e.from(this.godraysEffect.godRaysMaterial.uniforms.exposure,{value:1,duration:1,ease:"power3.inOut"},0),e.from(this.godraysEffect.godRaysMaterial.uniforms.decay,{value:1,duration:1,ease:"power3.inOut"},0),e}getScrollInAnimation(t=4){const e=l.gsap.timeline({paused:!1});e.to(this.group.position,{y:0,x:0,duration:t,ease:"sine.inOut"},0),e.to(this.group.position,{z:"-=5.5",duration:1.2*t,ease:"power4.inOut"},0),e.to(this.group.rotation,{x:.5*-Math.PI,duration:t,ease:"sine.inOut"},0),e.to(this.group.rotation,{y:1,duration:1.2*t,ease:"sine.inOut"},0),e.to(this.group.rotation,{z:-.18,duration:t,ease:"sine.inOut"},0),e.to(this.texture.repeat,{x:7.5,y:7.5,duration:1.2*t,ease:"power4.inOut"},0),e.to(this.pointCloudContainer.rotation,{x:-.5,duration:t,ease:"sine.inOut"},0);var i=.2*t,o=l.gsap.timeline({delay:1.5});return o.to(this.pointCloudBelt.material.uniforms.maxOpacity,{value:0,duration:.05*t,ease:"sine.out"},.2*t),o.to(this.godraysEffect.godRaysMaterial.uniforms.weight,{value:1,duration:i,ease:"sine.out"},.2*t),o.to(this.godraysEffect.godRaysMaterial.uniforms.exposure,{value:1,duration:i,ease:"sine.out"},.2*t),o.to(this.godraysEffect.godRaysMaterial.uniforms.decay,{value:1,duration:i,ease:"sine.out"},.2*t),o.to(this.eye.material,{opacity:0,duration:.2*t,ease:"power3.inOut"},.25*t),o.to(this.sun.material,{opacity:0,duration:.4*t,ease:"power3.inOut"},.25*t),o.to(this.group.position,{z:"+=90",duration:.6*t,ease:"power4.inOut"},.25*t),o.set(this.eye,{visible:!1},.45*t),o.set(this.ringsGroup,{visible:!1},.25*t),[e,o]}createRings(){var t=new o.Color(16777215),e={minBlur:.05,maxBlur:.1,minOpacity:1,focusFadeOutLength:7.77,focusFar:13.11,focusNear:8.7,maxOpacity:1};this.rings.push(new f(this.ringsGroup,2.93,Math.round(117.2),0,2*Math.PI,this.menu,"eye ring",t,e)),this.rings.push(new f(this.ringsGroup,4.1,Math.round(164),0,2*Math.PI,this.menu,"eye ring",t,e)),this.rings.push(new f(this.ringsGroup,5.4,Math.round(224),0,2*Math.PI,this.menu,"eye ring",t,e)),this.rings.push(new f(this.ringsGroup,7,Math.round(280),0,2*Math.PI,this.menu,"eye ring",t,e));var i=.05;this.rings[0].points.position.y=0,this.rings[1].points.position.y=.65,this.rings[2].points.position.y=.8,this.rings[3].points.position.y=i+.8,this.rings.forEach(((t,e)=>{t.points.rotation.x=.5*-Math.PI,l.gsap.to(t.points.rotation,{z:Math.PI,duration:50+10*e,repeat:-1,ease:"none"})}))}}class x{target;MouseMoveTracker;speed;pos={x:window.innerWidth/2,y:window.innerHeight/2};mouse={x:window.innerWidth/2,y:window.innerHeight/2};hitArea;bounds;resetTween=null;constructor(t,e,i=.2,o){this.MouseMoveTracker=t,this.target=e,this.speed=i,this.hitArea=o;this.onWindowResize(),l.gsap.ticker.add(this.raf),window.addEventListener("resize",this.onWindowResize)}raf=()=>{const t=l.gsap.quickSetter(this.target,"x","px"),e=l.gsap.quickSetter(this.target,"y","px"),i=1-Math.pow(1-this.speed,l.gsap.ticker.deltaRatio());this.MouseMoveTracker.mouse.originX>=this.bounds.left&&this.MouseMoveTracker.mouse.originX<=this.bounds.right&&this.MouseMoveTracker.mouse.originY>=this.bounds.top&&this.MouseMoveTracker.mouse.originY<=this.bounds.bottom?(this.mouse.x=this.MouseMoveTracker.mouse.x,this.mouse.y=this.MouseMoveTracker.mouse.y,this.resetTween&&(this.resetTween.kill(),this.resetTween=null)):null===this.resetTween&&(this.resetTween=l.gsap.to(this.mouse,{x:0,y:0,duration:.4})),this.pos.x+=(this.mouse.x-this.pos.x)*i,this.pos.y+=(this.mouse.y-this.pos.y)*i,t(this.pos.x),e(this.pos.y)};onWindowResize=()=>{this.bounds=this.hitArea.getBoundingClientRect()};enable=()=>{l.gsap.to(this.target,{opacity:1,duration:1})};disable=()=>{l.gsap.killTweensOf(this.target,"opacity"),l.gsap.to(this.target,{opacity:0,duration:.15}),l.gsap.ticker.remove(this.raf),window.removeEventListener("resize",this.onWindowResize)}}class E{pos=new o.Vector3;container=document.querySelector(".ExploreButton");xSet=l.gsap.quickSetter(this.container,"x","px");ySet=l.gsap.quickSetter(this.container,"y","px");frustum=new o.Frustum;matrix=new o.Matrix4;sphere=new o.Sphere(this.pos,6);gallery;main;constructor(t,e){this.gallery=t,this.main=e,l.gsap.set(this.container,{opacity:0,force3D:!0,visibility:"visible"}),this.container.addEventListener("click",this.clickHandler)}updateScreenPosition(t,e,i,o){this.matrix.copy(e.projectionMatrix),this.matrix.multiply(e.matrixWorldInverse),this.frustum.setFromProjectionMatrix(this.matrix),this.pos=this.pos.setFromMatrixPosition(t.matrixWorld),this.frustum.intersectsSphere(this.sphere)?(this.pos.project(e),this.pos.x=this.pos.x*i+i,this.pos.y=-this.pos.y*o+o,this.pos.z=0,this.xSet(this.pos.x),this.ySet(this.pos.y)):(this.xSet(-1e3),this.ySet(-1e3))}clickHandler=t=>(t.preventDefault(),this.gallery.visible||(this.gallery.setGalleryItems(this.main.currentExploreChapter.galleryImages),this.gallery.show()),!1)}i(51876);const v=new o.Vector3,w=new o.Matrix4;let P=[];function T(t,e){return e[0]-t[0]}const S=/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/;function O(t){let e=t.nodeType,i="";if(1===e||9===e||11===e){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=O(t)}else if(3===e||4===e)return t.nodeValue;return i}
/*!
 * SplitText: 3.6.1
 * https://greensock.com
 *
 * @license Copyright 2008-2021, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
let A,L,b,B=/(?:\r|\n|\t\t)/g,_=/(?:\s\s+)/g,I=t=>L.getComputedStyle(t),M=Array.isArray,k=[].slice,z=(t,e)=>{let i;return M(t)?t:"string"==(i=typeof t)&&!e&&t?k.call(A.querySelectorAll(t),0):t&&"object"===i&&"length"in t?k.call(t,0):t?[t]:[]},N=t=>"absolute"===t.position||!0===t.absolute,Z=(t,e)=>{let i,o=e.length;for(;--o>-1;)if(i=e[o],t.substr(0,i.length)===i)return i.length},R=(t="",e)=>{let i=~t.indexOf("++"),o=1;return i&&(t=t.split("++").join("")),()=>"<"+e+" style='position:relative;display:inline-block;'"+(t?" class='"+t+(i?o++:"")+"'>":">")},W=(t,e,i)=>{let o=t.nodeType;if(1===o||9===o||11===o)for(t=t.firstChild;t;t=t.nextSibling)W(t,e,i);else 3!==o&&4!==o||(t.nodeValue=t.nodeValue.split(e).join(i))},H=(t,e)=>{let i=e.length;for(;--i>-1;)t.push(e[i])},G=(t,e,i)=>{let o;for(;t&&t!==e;){if(o=t._next||t.nextSibling,o)return o.textContent.charAt(0)===i;t=t.parentNode||t._parent}},U=t=>{let e,i,o=z(t.childNodes),s=o.length;for(e=0;e<s;e++)i=o[e],i._isSplit?U(i):e&&i.previousSibling&&3===i.previousSibling.nodeType?(i.previousSibling.nodeValue+=3===i.nodeType?i.nodeValue:i.firstChild.nodeValue,t.removeChild(i)):3!==i.nodeType&&(t.insertBefore(i.firstChild,i),t.removeChild(i))},q=(t,e)=>parseFloat(e[t])||0,j=(t,e,i,o,s,a,n)=>{let r,u,l,h,p,c,d,m,D,g,y,C,f=I(t),F=q("paddingLeft",f),x=-999,E=q("borderBottomWidth",f)+q("borderTopWidth",f),v=q("borderLeftWidth",f)+q("borderRightWidth",f),w=q("paddingTop",f)+q("paddingBottom",f),P=q("paddingLeft",f)+q("paddingRight",f),T=q("fontSize",f)*(e.lineThreshold||.2),S=f.textAlign,O=[],L=[],b=[],B=e.wordDelimiter||" ",_=e.tag?e.tag:e.span?"span":"div",M=e.type||e.split||"chars,words,lines",k=s&&~M.indexOf("lines")?[]:null,z=~M.indexOf("words"),Z=~M.indexOf("chars"),R=N(e),j=e.linesClass,V=~(j||"").indexOf("++"),Y=[],X="flex"===f.display,K=t.style.display;for(V&&(j=j.split("++").join("")),X&&(t.style.display="block"),u=t.getElementsByTagName("*"),l=u.length,p=[],r=0;r<l;r++)p[r]=u[r];if(k||R)for(r=0;r<l;r++)h=p[r],c=h.parentNode===t,(c||R||Z&&!z)&&(C=h.offsetTop,k&&c&&Math.abs(C-x)>T&&("BR"!==h.nodeName||0===r)&&(d=[],k.push(d),x=C),R&&(h._x=h.offsetLeft,h._y=C,h._w=h.offsetWidth,h._h=h.offsetHeight),k&&((h._isSplit&&c||!Z&&c||z&&c||!z&&h.parentNode.parentNode===t&&!h.parentNode._isSplit)&&(d.push(h),h._x-=F,G(h,t,B)&&(h._wordEnd=!0)),"BR"===h.nodeName&&(h.nextSibling&&"BR"===h.nextSibling.nodeName||0===r)&&k.push([])));for(r=0;r<l;r++)if(h=p[r],c=h.parentNode===t,"BR"!==h.nodeName)if(R&&(D=h.style,z||c||(h._x+=h.parentNode._x,h._y+=h.parentNode._y),D.left=h._x+"px",D.top=h._y+"px",D.position="absolute",D.display="block",D.width=h._w+1+"px",D.height=h._h+"px"),!z&&Z)if(h._isSplit)for(h._next=u=h.nextSibling,h.parentNode.appendChild(h);u&&3===u.nodeType&&" "===u.textContent;)h._next=u.nextSibling,h.parentNode.appendChild(u),u=u.nextSibling;else h.parentNode._isSplit?(h._parent=h.parentNode,!h.previousSibling&&h.firstChild&&(h.firstChild._isFirst=!0),h.nextSibling&&" "===h.nextSibling.textContent&&!h.nextSibling.nextSibling&&Y.push(h.nextSibling),h._next=h.nextSibling&&h.nextSibling._isFirst?null:h.nextSibling,h.parentNode.removeChild(h),p.splice(r--,1),l--):c||(C=!h.nextSibling&&G(h.parentNode,t,B),h.parentNode._parent&&h.parentNode._parent.appendChild(h),C&&h.parentNode.appendChild(A.createTextNode(" ")),"span"===_&&(h.style.display="inline"),O.push(h));else h.parentNode._isSplit&&!h._isSplit&&""!==h.innerHTML?L.push(h):Z&&!h._isSplit&&("span"===_&&(h.style.display="inline"),O.push(h));else k||R?(h.parentNode&&h.parentNode.removeChild(h),p.splice(r--,1),l--):z||t.appendChild(h);for(r=Y.length;--r>-1;)Y[r].parentNode.removeChild(Y[r]);if(k){for(R&&(g=A.createElement(_),t.appendChild(g),y=g.offsetWidth+"px",C=g.offsetParent===t?0:t.offsetLeft,t.removeChild(g)),D=t.style.cssText,t.style.cssText="display:none;";t.firstChild;)t.removeChild(t.firstChild);for(m=" "===B&&(!R||!z&&!Z),r=0;r<k.length;r++){for(d=k[r],g=A.createElement(_),g.style.cssText="display:block;text-align:"+S+";position:"+(R?"absolute;":"relative;"),j&&(g.className=j+(V?r+1:"")),b.push(g),l=d.length,u=0;u<l;u++)"BR"!==d[u].nodeName&&(h=d[u],g.appendChild(h),m&&h._wordEnd&&g.appendChild(A.createTextNode(" ")),R&&(0===u&&(g.style.top=h._y+"px",g.style.left=F+C+"px"),h.style.top="0px",C&&(h.style.left=h._x-C+"px")));0===l?g.innerHTML="&nbsp;":z||Z||(U(g),W(g,String.fromCharCode(160)," ")),R&&(g.style.width=y,g.style.height=h._h+"px"),t.appendChild(g)}t.style.cssText=D}R&&(n>t.clientHeight&&(t.style.height=n-w+"px",t.clientHeight<n&&(t.style.height=n+E+"px")),a>t.clientWidth&&(t.style.width=a-P+"px",t.clientWidth<a&&(t.style.width=a+v+"px"))),X&&(K?t.style.display=K:t.style.removeProperty("display")),H(i,O),z&&H(o,L),H(s,b)},V=(t,e,i,o)=>{let s,a,n,r,u,l,h,p,c=e.tag?e.tag:e.span?"span":"div",d=~(e.type||e.split||"chars,words,lines").indexOf("chars"),m=N(e),D=e.wordDelimiter||" ",g=" "!==D?"":m?"&#173; ":" ",y="</"+c+">",C=1,f=e.specialChars?"function"==typeof e.specialChars?e.specialChars:Z:null,F=A.createElement("div"),x=t.parentNode;for(x.insertBefore(F,t),F.textContent=t.nodeValue,x.removeChild(t),s=O(t=F),h=-1!==s.indexOf("<"),!1!==e.reduceWhiteSpace&&(s=s.replace(_," ").replace(B,"")),h&&(s=s.split("<").join("{{LT}}")),u=s.length,a=(" "===s.charAt(0)?g:"")+i(),n=0;n<u;n++)if(l=s.charAt(n),f&&(p=f(s.substr(n),e.specialChars)))l=s.substr(n,p||1),a+=d&&" "!==l?o()+l+"</"+c+">":l,n+=p-1;else if(l===D&&s.charAt(n-1)!==D&&n){for(a+=C?y:"",C=0;s.charAt(n+1)===D;)a+=g,n++;n===u-1?a+=g:")"!==s.charAt(n+1)&&(a+=g+i(),C=1)}else"{"===l&&"{{LT}}"===s.substr(n,6)?(a+=d?o()+"{{LT}}</"+c+">":"{{LT}}",n+=5):l.charCodeAt(0)>=55296&&l.charCodeAt(0)<=56319||s.charCodeAt(n+1)>=65024&&s.charCodeAt(n+1)<=65039?(r=((s.substr(n,12).split(S)||[])[1]||"").length||2,a+=d&&" "!==l?o()+s.substr(n,r)+"</"+c+">":s.substr(n,r),n+=r-1):a+=d&&" "!==l?o()+l+"</"+c+">":l;t.outerHTML=a+(C?y:""),h&&W(x,"{{LT}}","<")},Y=(t,e,i,o)=>{let s,a,n=z(t.childNodes),r=n.length,u=N(e);if(3!==t.nodeType||r>1){for(e.absolute=!1,s=0;s<r;s++)a=n[s],a._next=a._isFirst=a._parent=a._wordEnd=null,(3!==a.nodeType||/\S+/.test(a.nodeValue))&&(u&&3!==a.nodeType&&"inline"===I(a).display&&(a.style.display="inline-block",a.style.position="relative"),a._isSplit=!0,Y(a,e,i,o));return e.absolute=u,void(t._isSplit=!0)}V(t,e,i,o)};class X{constructor(t,e){b||(A=document,L=window,b=1),this.elements=z(t),this.chars=[],this.words=[],this.lines=[],this._originals=[],this.vars=e||{},this.split(e)}split(t){this.isSplit&&this.revert(),this.vars=t=t||this.vars,this._originals.length=this.chars.length=this.words.length=this.lines.length=0;let e,i,o,s=this.elements.length,a=t.tag?t.tag:t.span?"span":"div",n=R(t.wordsClass,a),r=R(t.charsClass,a);for(;--s>-1;)o=this.elements[s],this._originals[s]=o.innerHTML,e=o.clientHeight,i=o.clientWidth,Y(o,t,n,r),j(o,t,this.chars,this.words,this.lines,i,e);return this.chars.reverse(),this.words.reverse(),this.lines.reverse(),this.isSplit=!0,this}revert(){let t=this._originals;if(!t)throw"revert() call wasn't scoped properly.";return this.elements.forEach(((e,i)=>e.innerHTML=t[i])),this.chars=[],this.words=[],this.lines=[],this.isSplit=!1,this}static create(t,e){return new X(t,e)}}X.version="3.6.1";class K{timeline=l.gsap.timeline({paused:!0});constructor(t){l.gsap.registerPlugin(X);var e=t.querySelector("h1"),i=t.querySelectorAll("h1")[1],o=new X(e,{type:"chars",charsClass:"blurCharacter"}),s=new X(i,{type:"chars"});o.chars.forEach((t=>{t.innerHTML="<span>".concat(t.innerText,"</span>")})),s.chars.forEach((t=>{t.innerHTML="<span>".concat(t.innerText,"</span>")})),l.gsap.set(o.chars,{opacity:0,force3D:!0}),l.gsap.set(s.chars,{opacity:1,force3D:!0}),l.gsap.set(t,{visibility:"hidden"}),this.timeline.set(t,{visibility:"visible"},0),this.timeline.to(t.querySelector(".ChapterIntro-lead"),{opacity:0,force3D:!0},0),this.timeline.to(t.querySelector(".ChapterIntro-number"),{opacity:0,force3D:!0},0),this.timeline.to(o.chars,{stagger:{each:.1,from:"edges",grid:"auto",ease:"power2.inOut"},opacity:1,ease:"quad.inOut",duration:.5,force3D:!0},0),this.timeline.to(o.chars,{stagger:{each:.1,from:"edges",grid:"auto",ease:"power2.inOut"},opacity:0,duration:.5,force3D:!0},.5),this.timeline.to(s.chars,{opacity:0,stagger:{each:.1,from:"edges",grid:"auto",ease:"power2.inOut"},duration:.5,ease:"quad.inOut",force3D:!0},0),this.timeline.fromTo(o.chars,{x:30,force3D:!0},{x:0,stagger:{each:.1,from:"edges",grid:"auto",ease:"power2.inOut"},duration:.5,ease:"quad.inOut",force3D:!0},0),this.timeline.set(t,{visibility:"hidden"})}}class J{timeline;constructor(t){this.timeline=l.gsap.timeline({paused:!0}),this.timeline.fromTo(t,{y:80},{y:0,ease:"power3.out",duration:.35},0),this.timeline.to(t,{opacity:1,ease:"sine.out",duration:.2},0),this.timeline.to(t,{opacity:0,ease:"sine.out",duration:.2},.8)}}class Q{menu;sortPoints=[];chapterWrapper=new o.Object3D;exploreAnchor=new o.Object3D;camera;mainGroup;cameraLookAtPoint;ringsMaterial;rings=[];exploreButton;chapterIntroClass;chapterPOITitles;currentChapterScrollProgress=0;chapterPOIs;scrollTimeline;cameraWrapper;duration=1;scrollProgress=0;SCROLL_LENGTH=10;CHAPTER_DISTANCE=m.GlobalsLanding.CHAPTER_DISTANCE;CHAPTER_OFFSET=0;main;index;galleryImages=[];constructor(t,e,i,o,s,a,n,r,u,h,p){const c=p.dataset.exploreTitles.split("|||"),d=p.dataset.exploreDescriptions.split("|||");this.galleryImages=p.dataset.exploreImages.split("|||").map(((t,e)=>({url:t,title:c[e],description:d[e]}))),this.index=u,this.cameraWrapper=i,this.menu=t,this.camera=e,this.mainGroup=o,this.cameraLookAtPoint=s,this.exploreButton=a,this.chapterPOITitles=r,this.main=h,this.chapterWrapper.name="Chapter "+u,this.chapterWrapper.position.z=(u-1)*this.CHAPTER_DISTANCE,this.mainGroup.add(this.chapterWrapper),this.ringsMaterial=new C({focusNear:.01,focusFar:113,focusFadeOutLength:7,minBlur:.08,minOpacity:0,maxOpacity:.55,maxBlur:.1},this.menu,"rings"),this.chapterIntroClass=new K(n),this.chapterIntroClass.timeline.progress(1),this.chapterPOIs=this.chapterPOITitles.map((t=>new J(t))),this.scrollTimeline=l.gsap.timeline({paused:!0}),this.scrollTimeline.to(this,{currentChapterScrollProgress:1,ease:"none",duration:this.duration},0)}loadDone(){this.sortPointsData()}sortPointsData(){this.sortPoints.forEach((t=>{!function(t,e){w.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),w.multiply(t.matrixWorld);const i=t.geometry;let s=i.getIndex();const a=i.getAttribute("position").array,n=a.length/3;if(null===s){const t=new Float32Array(n);for(let e=0;e<n;e++)t[e]=e;s=new o.BufferAttribute(t,1),i.setIndex(s)}P=[];for(let t=0;t<n;t++)v.fromArray(a,3*t),v.applyMatrix4(w),P.push([v.z,t]);P.sort(T);const r=s.array;for(let t=0;t<n;t++)r[t]=P[t][1];i.index.needsUpdate=!0}(t,this.camera),t.geometry=t.geometry.toNonIndexed()}))}raf(){this.sortPointsData()}setupScrollTimeline=()=>null;setActiveExploreItem=()=>{this.main.currentExploreChapter!==this&&(this.main.currentExploreChapter=this,this.main.activeExploreAnchor=this.exploreAnchor)};getLoadItems(){return null}itemLoaded(t,e,i){}}var $=i(32067);class tt{timeline;container;imagesComp;imagesSingular;svg;buttons;descriptions;descriptionWrapper;inTimeline;currHoverIndex=-1;currImageHoverTimeline;centerWrapper;scrollIndicator;choiceText;scrollLine;scrollLineBG;scrollLineDiamond;exploreNav;index;constructor(t,e=1){this.container=t,this.index=e,this.imagesComp=this.container.querySelectorAll(".MakeChoice-images .MakeChoice-imageComp"),this.imagesSingular=this.container.querySelectorAll(".MakeChoice-images .MakeChoice-imageSingular"),this.svg=this.container.querySelector(".MakeChoice-bgSVG"),this.buttons=this.container.querySelectorAll(".MakeChoice-button"),this.descriptions=this.container.querySelectorAll(".MakeChoice-description"),this.descriptionWrapper=this.container.querySelector(".MakeChoice-descriptions"),this.centerWrapper=this.container.querySelector(".MakeChoice-center"),this.scrollIndicator=this.container.querySelector(".MakeChoice-scrollIndicator"),this.choiceText=this.container.querySelector(".MakeChoice-text"),this.scrollLine=this.container.querySelector(".MakeChoice-scrollIndicator-line"),this.scrollLineBG=this.container.querySelector(".MakeChoice-scrollIndicator-lineBG"),this.scrollLineDiamond=this.container.querySelector(".MakeChoice-Diamond"),this.exploreNav=document.querySelector(".ExploreNav"),this.inTimeline=l.gsap.timeline({paused:!0}),this.inTimeline.fromTo(this.svg,{opacity:0},{opacity:1,duration:1},0),this.inTimeline.fromTo(this.buttons,{opacity:0},{opacity:1,duration:1},0),this.inTimeline.fromTo(this.imagesComp[0],{opacity:0},{opacity:1,duration:.6},0),2===this.index?(this.inTimeline.fromTo(this.imagesComp[2],{yPercent:2,xPercent:15},{yPercent:0,xPercent:0,ease:"power4.out",duration:1.2},0),this.inTimeline.fromTo([this.imagesComp[2],this.imagesComp[1]],{opacity:0},{opacity:1,duration:.4},0),this.inTimeline.fromTo(this.imagesComp[0],{xPercent:10,yPercent:5},{xPercent:0,yPercent:0,ease:"power4.out",duration:1.5},0),this.inTimeline.fromTo(this.imagesComp[1],{yPercent:-4,xPercent:20},{yPercent:0,xPercent:0,ease:"power4.out",duration:1.6},0)):(this.inTimeline.fromTo(this.imagesComp[1],{xPercent:-10},{xPercent:0,ease:"power4.out",duration:1.8},0),this.inTimeline.fromTo(this.imagesComp[0],{yPercent:5},{yPercent:0,duration:1.2},0),this.inTimeline.fromTo([this.imagesComp[2],this.imagesComp[1]],{opacity:0},{opacity:1,duration:.4},0),this.inTimeline.fromTo(this.imagesComp[2],{xPercent:10},{xPercent:0,ease:"power4.out",duration:1.5},0)),this.inTimeline.set(this.buttons,{pointerEvents:"auto"}),this.timeline=l.gsap.timeline({paused:!0});this.timeline.to(this.exploreNav,{opacity:0,x:-100,duration:.1},0);var i=.2;this.timeline.call((()=>{this.mouseOut(-1,!0),this.inTimeline.pause(0),this.inTimeline.render(0)}),null,i+.1),this.timeline.fromTo(this.centerWrapper,{opacity:0},{opacity:1,duration:.05},i+.1),this.timeline.fromTo(this.descriptionWrapper,{opacity:0},{opacity:1,duration:.05},i+.1),this.timeline.call((()=>{this.playIn()}),null,i+.1),this.timeline.fromTo(this.scrollIndicator,{opacity:0,x:-80},{opacity:1,x:0,duration:.1},.25),this.timeline.fromTo(this.choiceText,{opacity:0},{opacity:1,duration:.12},.25),this.timeline.fromTo(this.choiceText,{x:()=>m.GlobalsLanding.MainScene.width>=768?-80:0},{x:0,duration:.15},.25),this.timeline.fromTo(this.scrollLine,{scaleY:0},{scaleY:1,ease:"none",duration:.55},.35);var o=l.gsap.timeline({paused:!0});o.to(this.scrollLine,{scaleY:0,yPercent:100,duration:.9,ease:"none"},0),o.to(this.scrollLineBG,{scaleY:0,yPercent:100,duration:.9,ease:"none"},0),o.to(this.scrollLine,{y:16,duration:.1,ease:"none"},.9),o.to(this.scrollLineBG,{y:16,duration:.1,ease:"none"},.9),o.to(this.scrollIndicator,{opacity:0,duration:1,ease:"sine.out"},0),o.to(this.scrollLineDiamond,{y:300,duration:.9,ease:"none"},0),o.to(this.scrollLineDiamond,{y:316,duration:.1,ease:"none"},.9),o.to(this.choiceText,{opacity:0,duration:.5,ease:"sine.out"},0),o.to(this.choiceText,{y:50,duration:1,ease:"sine.out"},0),o.to(this.centerWrapper,{opacity:0,duration:.3},.7),o.to(this.descriptionWrapper,{opacity:0,duration:.3},.7),this.timeline.to(o,{progress:1,duration:.1},.9),this.timeline.to(this.exploreNav,{opacity:1,x:0,duration:.07},.93),this.timeline.set(this.container,{visibility:"visible"},0),this.timeline.set(this.container,{visibility:"hidden"},1),this.buttons.forEach(((t,e)=>{const i=e;t.addEventListener("mouseover",(()=>this.mouseOver(i)),!1),t.addEventListener("mouseout",(()=>this.mouseOut(i)),!1)}))}mouseOver=t=>{-1!==this.currHoverIndex&&this.currHoverIndex!==t&&this.hideCurrentIndex(),this.currHoverIndex=t,this.currImageHoverTimeline&&(this.currImageHoverTimeline.kill(),this.currImageHoverTimeline=null),this.currImageHoverTimeline=l.gsap.timeline(),this.currImageHoverTimeline.to(this.imagesComp[0],{opacity:0,duration:.25},0),this.currImageHoverTimeline.to([this.imagesComp[2],this.imagesComp[1]],{opacity:0,duration:.3},0),2===this.index?(this.currImageHoverTimeline.to(this.imagesComp[0],{yPercent:0,xPercent:-15,ease:"power4.out",duration:1.2/1.6},0),this.currImageHoverTimeline.to(this.imagesComp[2],{xPercent:-10,yPercent:-5,ease:"power4.out",duration:.9375},0),this.currImageHoverTimeline.to(this.imagesComp[1],{yPercent:4,xPercent:-20,ease:"power4.out",duration:1},0)):(this.currImageHoverTimeline.to(this.imagesComp[2],{xPercent:3,ease:"power4.out",duration:1},0),this.currImageHoverTimeline.to(this.imagesComp[1],{xPercent:-3,ease:"power4.out",duration:1},0)),l.gsap.killTweensOf(this.descriptions[this.currHoverIndex]),l.gsap.killTweensOf(this.imagesSingular[this.currHoverIndex]),l.gsap.to(this.descriptions[this.currHoverIndex],{opacity:1,duration:.5}),l.gsap.to(this.imagesSingular[this.currHoverIndex],{opacity:1,duration:2===this.index?.3:.1})};hideCurrentIndex(t=!1){l.gsap.killTweensOf(this.descriptions[this.currHoverIndex]),l.gsap.killTweensOf(this.imagesSingular[this.currHoverIndex]),l.gsap.to(this.descriptions[this.currHoverIndex],{opacity:0,duration:t?0:.35}),l.gsap.to(this.imagesSingular[this.currHoverIndex],{opacity:0,duration:t?0:2===this.index?.3:.6}),this.currImageHoverTimeline&&(this.currImageHoverTimeline.kill(),this.currImageHoverTimeline=null),this.currImageHoverTimeline=l.gsap.timeline(),this.currImageHoverTimeline.to(this.imagesComp[0],{opacity:1,duration:t?0:.6},0),this.currImageHoverTimeline.to([this.imagesComp[2],this.imagesComp[1]],{opacity:1,duration:t?0:.4},0),2===this.index?(this.currImageHoverTimeline.to(this.imagesComp[0],{yPercent:0,xPercent:0,ease:"power4.out",duration:t?0:1.2/1.6},0),this.currImageHoverTimeline.to(this.imagesComp[2],{xPercent:0,yPercent:0,ease:"power4.out",duration:t?0:.9375},0),this.currImageHoverTimeline.to(this.imagesComp[1],{yPercent:0,xPercent:0,ease:"power4.out",duration:t?0:1},0)):(this.currImageHoverTimeline.to(this.imagesComp[2],{xPercent:0,ease:"power4.out",duration:t?0:1},0),this.currImageHoverTimeline.to(this.imagesComp[1],{xPercent:0,ease:"power4.out",duration:t?0:1},0))}mouseOut=(t,e=!1)=>{-1!==this.currHoverIndex&&this.hideCurrentIndex(e),this.currHoverIndex=-1};playIn(){this.inTimeline.paused()&&this.inTimeline.play()}}class et extends Q{planetLink;planetLinkContainer=new o.Object3D;spaceContainer;spaceStation;_shipWrapper;_ship;ringsWrapper=new o.Group;makeChoice;dollyZoom;dollyZoom2;dollyZoom3;dollyZoom4;dollyZoom5;dollyZoom6;dollyZoom7;CHAPTER_OFFSET=.005;SCROLL_LENGTH=15;constructor(t,e,i,o,s,a,n,r,l,h,p){super(t,e,i,o,s,a,n,r,l,h,p),this.dollyZoom=new u(this.camera,this.cameraLookAtPoint),this.dollyZoom2=new u(this.camera,this.cameraLookAtPoint),this.dollyZoom3=new u(this.camera,this.cameraLookAtPoint),this.dollyZoom4=new u(this.camera,this.cameraLookAtPoint),this.dollyZoom5=new u(this.camera,this.cameraLookAtPoint),this.dollyZoom6=new u(this.camera,this.cameraLookAtPoint),this.dollyZoom7=new u(this.camera,this.cameraLookAtPoint),this.chapterWrapper.add(this.ringsWrapper),this.makeChoice=new tt(document.querySelectorAll(".MakeChoice")[1],2)}getLoadItems(){return[["particles/vzus/0.drc","ship"],["particles/spacestation/0.drc","space_station"],["particles/planet_link/0.drc","planet_link"],["particles/planet_link/lines.drc","planet_link_lines"]]}itemLoaded=(t,e,i)=>{if("ship"===i){var s=new C({focusFadeOutLength:4.87,focusNear:7.523,focusFar:11.934,minOpacity:.016,maxOpacity:.214,maxBlur:.13,minBlur:.12},this.menu,i);(a=new o.Points(t,s)).scale.set(.01,.01,.01),a.add(this.exploreAnchor),this.exploreAnchor.position.set(-152.65,-25.95,-78.08),this._shipWrapper=new o.Object3D,this._shipWrapper.rotation.set(-.34,.65,.36),this._shipWrapper.add(a),this._ship=a,this.sortPoints.push(a),this._shipWrapper.position.z=12.5,a=this._shipWrapper}else if("space_station"===i){s=new C({useFocusCenter:!1,focusNear:10,focusFar:16,focusFadeOutLength:9.5,minOpacity:0,maxOpacity:.016,maxBlur:.2,minBlur:.006},this.menu,i);(a=new o.Points(t,s)).scale.set(.005,.005,.005),this.sortPoints.push(a),this.spaceStation=a,this.spaceContainer=new o.Object3D,this.spaceContainer.position.set(-4.67,-9,-80),this.spaceContainer.add(this.spaceStation),l.gsap.to(a.rotation,{y:2*Math.PI,ease:"none",repeat:-1,duration:200}),l.gsap.to(a.position,{y:.5,ease:"sine.inOut",repeat:-1,yoyo:!0,duration:5}),a=this.spaceContainer}else if("planet_link"===i){s=new C({useFocusCenter:!1,focusNear:5.436,focusFar:.01,focusFadeOutLength:35.4,minOpacity:0,maxOpacity:.05,maxBlur:.19,minBlur:.08},this.menu,i);var a=new o.Points(t,s);this.sortPoints.push(a),a.scale.set(.005,.005,.005),this.planetLink=a,a.name="planetLink",this.planetLinkContainer.add(this.planetLink),this.planetLinkContainer.scale.set(-1,1,1),this.planetLinkContainer.position.set(-2.2,-1.55,-21.1),this.planetLinkContainer.rotation.set(.28,-.568,0),a=this.planetLinkContainer}else if("planet_link_lines"===i){s=new C({useFocusCenter:!1,focusNear:.01,focusFar:12.2,focusFadeOutLength:.485,minOpacity:0,maxOpacity:.2,maxBlur:.11,minBlur:.1},this.menu,i),a=new o.Points(t,s);this.sortPoints.push(a),a.scale.set(.005,.005,.005),a.name="planetLink-lines",this.planetLinkContainer.add(a),a=this.planetLinkContainer}a.name=i,this.chapterWrapper.add(a)};loadDone(){super.loadDone(),this.createChapterRings()}setupScrollTimeline=()=>{const t=this.duration,e=.1;this.scrollTimeline.set(this.chapterWrapper,{visible:!1},0),this.scrollTimeline.set(this.chapterWrapper,{visible:!0},.001),this.scrollTimeline.to(this,{scrollProgress:1,ease:"none",duration:this.duration},0),this.scrollTimeline.fromTo(this.chapterIntroClass.timeline,{progress:1},{progress:0,ease:"none",duration:.45*e},0),this.scrollTimeline.to(this.chapterIntroClass.timeline,{progress:1,ease:"none",duration:.03},.125),this.scrollTimeline.fromTo(this.ringsWrapper.position,{z:20},{z:0,ease:"none",duration:e},0),this.scrollTimeline.from(this.ringsMaterial.uniforms.maxOpacity,{value:0,duration:.05},.45*e),this.scrollTimeline.to(this.dollyZoom7,{totalProgress:1,duration:.75*e,ease:"power1.inOut",onUpdate:()=>this.dollyZoom7.update(15,4.32207356734125,55)},0),this.scrollTimeline.to(this.main.clusterCloud.material.uniforms.focusFar,{value:160,ease:"power1.inOut",duration:.75*e},0);const i=l.gsap.timeline({paused:!0});var o=l.gsap.timeline({paused:!0});o.to({dummy:0},{dummy:1,duration:100},0),o.to(this.ringsMaterial.uniforms.focusFar,{value:.01,ease:"power1.inOut",duration:4},0),o.to(this.ringsMaterial.uniforms.focusFadeOutLength,{value:24,ease:"sine.out",duration:5},0),o.to(this.main.clusterCloud.material.uniforms.focusFar,{value:51,ease:"sine.out",duration:4},0),o.to(this.main,{mousePanAmount:4,mouseMoveAmount:1,duration:10},0),o.to(this.dollyZoom,{totalProgress:1,duration:7,ease:"power1.inOut",onUpdate:()=>this.dollyZoom.update(110,100,15)},0),o.to(this.dollyZoom2,{totalProgress:1,duration:12,ease:"power1.inOut",onUpdate:()=>this.dollyZoom2.update(55,3,110)},10),o.to(this.dollyZoom3,{totalProgress:1,duration:6,ease:"sine.inOut",onUpdate:()=>this.dollyZoom3.update(110,20,55)},30),o.to(this.dollyZoom4,{totalProgress:1,duration:12,ease:"power1.inOut",onUpdate:()=>this.dollyZoom4.update(55,3,110)},40),o.to(this.dollyZoom5,{totalProgress:1,duration:6,ease:"sine.inOut",onUpdate:()=>this.dollyZoom5.update(110,20,55)},70),o.to(this.dollyZoom6,{totalProgress:1,duration:10,ease:"sine.inOut",onUpdate:()=>this.dollyZoom6.update(55,8,110)},80),i.to(o,{progress:1,ease:"none",duration:.9*t},0),i.to(this.spaceStation.material.uniforms.maxOpacity,{value:.129,ease:"none",duration:.1*t},.1),i.to(this.spaceStation.material.uniforms.minBlur,{value:.08,ease:"none",duration:.1*t},.1),i.to(this.spaceStation.material.uniforms.focusFadeOutLength,{value:9,ease:"none",duration:.1*t},.1),i.to(this.spaceStation.material.uniforms.focusNear,{value:12,ease:"none",duration:.1*t},.1),i.to(this.spaceContainer.position,{y:-3.31,ease:"sine.out",duration:.2*t},0),i.to(this.spaceContainer.rotation,{y:.28,ease:"sine.out",duration:.2*t},0),i.to(this.planetLinkContainer.position,{x:2.7,ease:"power1.inOut",duration:.2*t},.4),i.to(this.planetLinkContainer.rotation,{y:0,x:0,ease:"power1.inOut",duration:.2*t},.4),i.to(this.planetLink.material.uniforms.focusFar,{value:37,ease:"none",duration:.2*t},.4),i.to(this.chapterPOIs[0].timeline,{progress:1,ease:"none",duration:.25*t},.08),i.to(this.chapterPOIs[1].timeline,{progress:1,ease:"none",duration:.25*t},.4),i.to(this._shipWrapper.position,{z:16.95,ease:"power4.inOut",duration:.18*t},.7),i.fromTo(this._ship.rotation,{x:-.27,y:-.6,z:1.659},{x:0,y:0,z:0,ease:"power2.inOut",duration:.18*t},.7),i.fromTo(this._ship.position,{x:2.04,y:0,z:300},{x:.98,y:-.25,z:-2.81,ease:"power2.inOut",duration:.15*t},.7),i.to(this._ship.position,{z:-19,ease:"power2.in",duration:.1*t},.85),i.to(this._ship.rotation,{x:0,y:0,z:-.23,ease:"power4.in",duration:.07*t},.88),i.to(this._shipWrapper.rotation,{x:0,y:0,z:-.14,ease:"power4.in",duration:.3*t},.7),i.fromTo(this._ship.material.uniforms.minOpacity,{value:0},{value:.016,ease:"sine.out",duration:.18*t},.7),i.to(this._ship.material.uniforms.maxBlur,{value:.36,ease:"sine.out",duration:.1*t},.9),i.to(this._ship.material.uniforms.focusNear,{value:9.76,duration:.1*t},.9);var s=l.gsap.timeline({paused:!0,onUpdate:this.setActiveExploreItem});s.set(this.exploreButton.container,{pointerEvents:"none",duration:0},.19),s.set(this.exploreButton.container,{pointerEvents:"auto",duration:0},.2),s.fromTo(this.exploreButton.container,{opacity:0},{opacity:1,ease:"sine.out",duration:.2},.2),s.fromTo(this.exploreButton.container,{opacity:1},{opacity:0,ease:"sine.out",duration:.2},.8),s.set(this.exploreButton.container,{pointerEvents:"none",duration:0},1),i.to(s,{progress:1,ease:"none",duration:.25*t},.7);const a=$.CustomEase.create("custom","M0,0 C0.632,0.674 0.656,0.708 0.786,0.854 0.852,0.928 0.918,1 1,1 ");return i.to(this.cameraWrapper.position,{z:252,ease:a,duration:this.duration},0),i.to(this.cameraLookAtPoint.position,{z:150+this.CHAPTER_DISTANCE,ease:a,duration:this.duration},0),i.to(this.main,{mousePanAmount:2,mouseMoveAmount:2,duration:.1},.9),this.scrollTimeline.to(i,{progress:1,duration:.88*this.duration-e,ease:"none"},e),this.scrollTimeline.to(this.makeChoice.timeline,{progress:1,duration:.3*this.duration-.06,ease:"none"},.76),this.scrollTimeline.set(this.chapterWrapper,{visible:!0},.999),this.scrollTimeline.set(this.chapterWrapper,{visible:!1},1),this.scrollTimeline};createChapterRings(){for(let t=0;t<15;t++){const e=new f(this.ringsWrapper,10,100,0,2*Math.PI,this.menu,"ring",new o.Color(524802),null,this.ringsMaterial);this.rings.push(e),e.points.position.z=20-10*t,l.gsap.to(e.points.rotation,{z:Math.PI,duration:50+10*t,repeat:-1,ease:"none"})}}}var it=i(82854),ot=i(1217),st=i(25108);class at extends o.Loader{chapters;loadItems=new Map;currentlyLoaded=0;additionalLoads=0;additionalLoadsCompleted=0;loadDoneCallback;dracoLoader=new it.DRACOLoader;gltfLoader=new ot.GLTFLoader;loadedPaths=[];taskConfig={attributeIDs:{position:"POSITION",color:"COLOR",size:"GENERIC"},attributeTypes:{position:"Float32Array",color:"Float32Array",size:"Float32Array"},useUniqueIDs:!1};constructor(t){super(),this.manager.setURLModifier((t=>"assets/home/"+t)),this.loadDoneCallback=t,this.dracoLoader.setDecoderPath("libs/draco/"),this.dracoLoader.setDecoderConfig({type:"wasm"}),this.dracoLoader.preload(),this.gltfLoader.setDRACOLoader(this.dracoLoader)}setChapters(t){this.chapters=t,this.chapters.forEach((t=>{t.getLoadItems().forEach((e=>{const i=e[0],o={path:i,name:e[1],doneCallback:t.itemLoaded};this.loadItems.has(i)?this.loadItems.get(i).push(o):this.loadItems.set(i,[o])}))}))}addLoadItem=t=>{const e=t.path;this.loadItems.has(e)?this.loadItems.get(e).push(t):this.loadItems.set(e,[t])};loadGLTF=(t,e)=>{this.additionalLoads++,this.gltfLoader.load(t,(t=>{this.additionalLoadsCompleted++,this.checkLoadDone(),e(t)}),(function(t){}),(function(t){st.log("An error happened",t)}))};dracoLoad(t,e,i,s){const a=new o.FileLoader(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,(t=>{this.dracoLoader.decodeGeometry(t,this.taskConfig).then(e).catch(s)}),i,s)}startLoading(){this.loadItems.forEach((t=>{t[0].path.indexOf(".drc")>0&&this.dracoLoad(t[0].path,(e=>{e.setAttribute("customColor",e.attributes.color),e.deleteAttribute("color"),this.itemLoaded(e,t)}),(function(t){}),(function(t){st.log("An error happened"),st.log(t)}))}))}itemLoaded=(t,e)=>{this.currentlyLoaded++,e.forEach((e=>e.doneCallback(t,e.path,e.name))),this.checkLoadDone()};checkLoadDone(){this.loadItems.size+this.additionalLoads===this.currentlyLoaded+this.additionalLoadsCompleted&&this.loadDone()}loadDone(){this.dracoLoader.dispose(),this.loadDoneCallback()}loadTexture(t){return this.additionalLoads++,(new o.TextureLoader).load(t,(t=>{this.additionalLoadsCompleted++,this.checkLoadDone()}),(function(t){}),(function(t){st.log("An error happened",t)}))}}var nt=i(63441);l.gsap.registerPlugin($.CustomEase,nt.SlowMo);class rt extends Q{SCROLL_LENGTH=11;dollyZoom;dollyZoom2;dollyZoom3;dollyZoom4;dollyZoom5;dollyZoom6;makeChoice;planetShipsOrbit;planetShipsOrbitContainer=new o.Object3D;ship;shipContainer=new o.Object3D;shipContainer2=new o.Object3D;planets;ship2;constructor(t,e,i,o,s,a,n,r,l,h,p){super(t,e,i,o,s,a,n,r,l,h,p),this.dollyZoom=new u(this.camera,this.cameraLookAtPoint),this.dollyZoom2=new u(this.camera,this.cameraLookAtPoint),this.dollyZoom3=new u(this.camera,this.cameraLookAtPoint),this.dollyZoom4=new u(this.camera,this.cameraLookAtPoint),this.dollyZoom5=new u(this.camera,this.cameraLookAtPoint),this.dollyZoom6=new u(this.camera,this.cameraLookAtPoint),this.makeChoice=new tt(document.querySelectorAll(".MakeChoice")[0])}getLoadItems(){return[["particles/planet_ships_orbit/0.drc","planet_ships_orbit"],["particles/pearce_ship/pearce.drc","ship"],["particles/multiple_planets/0.drc","planets"]]}itemLoaded=(t,e,i)=>{if("planet_ships_orbit"===i){var s=new C({focusNear:10,focusFar:16,focusFadeOutLength:9,minBlur:.02,maxBlur:.09,minOpacity:0,maxOpacity:.126},this.menu,i),a=new o.Points(t,s);this.sortPoints.push(a),a.scale.set(-.005,.005,.005),a.position.x=-5.57,a.position.z=-80,a.visible=!1,this.planetShipsOrbit=a,this.planetShipsOrbitContainer.add(this.planetShipsOrbit),a=this.planetShipsOrbitContainer}else if("ship"===i){s=new C({focusNear:5.1,focusFar:29,focusFadeOutLength:2.6,minBlur:.08,maxBlur:.3,minOpacity:0,maxOpacity:.192,radiusScaleFactor:100},this.menu,i),a=new o.Points(t,s);this.ship2=new o.Points(t,s),this.sortPoints.push(this.ship2),this.sortPoints.push(a),a.scale.set(-1,1,1),this.ship2.scale.set(-1,1,1),a.position.z=-25.96,a.rotation.x=-.16,a.visible=!1,this.ship=a,this.shipContainer.add(this.ship),this.shipContainer2.position.set(-6.96,-2.78,-26),this.shipContainer2.rotation.set(0,-2.81,0),this.shipContainer2.add(this.ship2),this.chapterWrapper.add(this.shipContainer2),a=this.shipContainer}else if("planets"===i){s=new C({minOpacity:0,minBlur:.04,maxOpacity:.5,maxBlur:.21,focusNear:3,focusFar:150,focusFadeOutLength:3.76,radiusScaleFactor:100},this.menu,i),a=new o.Points(t,s);this.sortPoints.push(a),this.planets=a,a.scale.set(-1,1,1),a.position.z=80,this.exploreAnchor.position.set(-11.87,8.7,18.9),a.add(this.exploreAnchor),a.visible=!1}a.name=i,this.chapterWrapper.add(a)};loadDone(){super.loadDone(),this.createChapterRings()}setupScrollTimeline=()=>{const t=this.duration;this.scrollTimeline.to(this.chapterIntroClass.timeline,{progress:1,ease:"none",duration:.05*t},0);const e=l.gsap.timeline({paused:!0});this.scrollTimeline.to(this,{scrollProgress:1,ease:"none",duration:this.duration},0);var i=l.gsap.timeline({paused:!0});i.to({dummy:0},{dummy:1,duration:100},0),i.to(this.ringsMaterial.uniforms.focusFar,{value:.01,ease:"sine.out",duration:2},0),i.to(this.ringsMaterial.uniforms.focusFadeOutLength,{value:24,ease:"sine.out",duration:2},0),i.to(this.main.clusterCloud.material.uniforms.focusFar,{value:51,ease:"sine.out",duration:4},0),i.to(this.main,{mousePanAmount:6,mouseMoveAmount:1,duration:7},0),i.to(this.dollyZoom,{totalProgress:1,duration:7,ease:"sine.out",onUpdate:()=>this.dollyZoom.update(110,100,15)},0),i.to(this.dollyZoom2,{totalProgress:1,duration:12,ease:"power1.inOut",onUpdate:()=>this.dollyZoom2.update(55,3,110)},10),i.to(this.dollyZoom3,{totalProgress:1,duration:6,ease:"sine.inOut",onUpdate:()=>this.dollyZoom3.update(110,20,55)},30),i.to(this.dollyZoom4,{totalProgress:1,duration:12,ease:"power1.inOut",onUpdate:()=>this.dollyZoom4.update(55,3,110)},40),i.to(this.dollyZoom5,{totalProgress:1,duration:6,ease:"sine.inOut",onUpdate:()=>this.dollyZoom5.update(110,20,55)},70),i.to(this.dollyZoom6,{totalProgress:1,duration:10,ease:"sine.inOut",onUpdate:()=>this.dollyZoom6.update(55,8,110)},80),e.to(i,{progress:1,ease:"none",duration:.9*t},0),e.to(this.chapterPOIs[0].timeline,{progress:1,ease:"none",duration:.25*t},.08),e.to(this.chapterPOIs[1].timeline,{progress:1,ease:"none",duration:.25*t},.4),e.to(".ScrollHelpIndicator",{opacity:0,yPercent:100,ease:"none",duration:.02*t},0),e.set(this.planetShipsOrbit,{visible:!0},0),e.to(this.planetShipsOrbit.material.uniforms.maxBlur,{value:.21,duration:.16},.2),e.fromTo(this.planetShipsOrbit.material.uniforms.maxOpacity,{value:.027},{value:.3,duration:.16},.1),e.fromTo(this.planetShipsOrbit.rotation,{x:-.15,y:-.45},{x:.15,y:.45,duration:.45},.05),e.to(this.planetShipsOrbit.position,{y:-5.19,duration:.45},.05),e.set(this.planetShipsOrbit,{visible:!1},.3),e.set(this.ship,{visible:!0},.3),e.fromTo(this.ship.rotation,{z:-2},{z:0,ease:"power1.inOut",duration:.4*t},.3),e.to(this.ship.rotation,{x:0,ease:"power2.inOut",duration:.4*t},.3),e.fromTo(this.ship.rotation,{y:-.37},{y:0,ease:"power2.inOut",duration:.4*t},.3),e.fromTo(this.ship.position,{z:-5},{z:-30,ease:"power1.out",duration:.5*t},.35),e.fromTo(this.ship.position,{y:-5},{y:0,ease:"power3.out",duration:.5*t},.35),e.fromTo(this.shipContainer2.position,{z:-30},{z:-26,ease:"power1.out",duration:.4*t},.3),e.fromTo(this.ship2.position,{z:30},{z:-60,ease:"power1.out",duration:.4*t},.3),e.fromTo(this.ship2.rotation,{z:1.06},{z:0,ease:"power3.out",duration:.4*t},.3),e.set(this.ship2,{visible:!1},.5),e.fromTo(this.ship.material.uniforms.minBlur,{value:.02},{value:.08,ease:"none",duration:.2*t},.3),e.from(this.ship.material.uniforms.maxOpacity,{value:0,ease:"none",duration:.04*t},.3),e.set(this.planetShipsOrbit,{visible:!1},.6),e.set(this.planets,{visible:!0},.6),e.fromTo(this.planets.material.uniforms.maxOpacity,{value:0},{value:.137,ease:"none",duration:.05*t},.65),e.to(this.planets.material.uniforms.maxOpacity,{value:.578,ease:"none",duration:.05*t},.74),e.from(this.planets.material.uniforms.radiusScaleFactor,{value:50,ease:"none",duration:.3*t},.65),e.fromTo(this.planets.material.uniforms.minBlur,{value:.001},{value:.045,ease:"none",duration:.25*t},.65),e.to(this.planets.rotation,{y:.71,ease:"power1.inOut",duration:.35*t},.65),e.to(this.planets.position,{z:10,ease:"none",duration:.3*t},.65),e.to(this.planets.position,{y:2,ease:"power1.inOut",duration:.3*t},.65),e.to(this.planets.material.uniforms.focusNear,{value:20,ease:"none",duration:.15*t},.65),e.to(this.planets.material.uniforms.focusFadeOutLength,{value:3,ease:"none",duration:.15*t},.65),e.to(this.planets.material.uniforms.maxOpacity,{value:0,ease:"none",duration:.1*t},.8),e.set(this.planets,{visible:!1},.9);var o=l.gsap.timeline({paused:!0,onUpdate:this.setActiveExploreItem});o.set(this.exploreButton.container,{pointerEvents:"none",duration:0},.19),o.set(this.exploreButton.container,{pointerEvents:"auto",duration:0},.2),o.fromTo(this.exploreButton.container,{opacity:0},{opacity:1,ease:"sine.out",duration:.2},.2),o.fromTo(this.exploreButton.container,{opacity:1},{opacity:0,ease:"sine.out",duration:.2},.8),o.set(this.exploreButton.container,{pointerEvents:"none",duration:0},1),e.to(o,{progress:1,ease:"none",duration:.25*t},.62);const s=$.CustomEase.create("custom","M0,0 C0.632,0.674 0.656,0.708 0.786,0.854 0.852,0.928 0.918,1 1,1 ");return e.to(this.cameraWrapper.position,{z:130,ease:s,duration:this.duration},0),e.to(this.cameraLookAtPoint.position,{z:150,ease:s,duration:this.duration},0),e.to(this.main,{mousePanAmount:2,mouseMoveAmount:2,duration:.1},.9),this.scrollTimeline.to(e,{progress:1,duration:.88*this.duration,ease:"none"},0),this.scrollTimeline.to(this.makeChoice.timeline,{progress:1,duration:.3*this.duration,ease:"none"},.7),this.scrollTimeline.set(this.chapterWrapper,{visible:!0},.999),this.scrollTimeline.set(this.chapterWrapper,{visible:!1},1),this.scrollTimeline};createChapterRings(){for(let t=0;t<14;t++){const e=new f(this.chapterWrapper,10,100,0,2*Math.PI,this.menu,"ring",new o.Color(524802),null,this.ringsMaterial);this.rings.push(e),e.points.position.z=10-10*t,l.gsap.to(e.points.rotation,{z:Math.PI,duration:50+10*t,repeat:-1,ease:"none"})}}}class ut{material;container;group=new o.Group;constructor(t,e,i,o){this.chapters=i,this.container=e,this.material=new C({focusNear:.01,focusFar:160,focusFadeOutLength:28,maxBlur:.11,minBlur:.05,minOpacity:0,maxOpacity:.28},o,"ClusterCloud"),this.container.add(this.group),t.addLoadItem({path:"particles/clusters/0.drc",name:"cluster",doneCallback:this.setupGeometry})}setupGeometry=(t,e,i)=>{let s;var a=5087.172/10;for(let e=0;e<this.chapters;e++){const i=(e-1)*m.GlobalsLanding.CHAPTER_DISTANCE;for(let e=0;e<3;e++)s=new o.Points(t,this.material),s.scale.set(.1,.1,.1),s.position.set(0,0,i+e*a),l.gsap.to(s.rotation,{z:2*Math.PI,ease:"none",repeat:-1,duration:200}),l.gsap.to(s.position,{z:"-="+a,ease:"none",repeat:-1,duration:100}),this.group.add(s)}};chapters}class lt{container=document.querySelector(".ExploreNav");links=Array.from(this.container.querySelectorAll("a"));lines=Array.from(this.container.querySelectorAll(".ExploreNav-line"));linesInner=Array.from(this.container.querySelectorAll(".ExploreNav-lineInner"));linesProgress=Array.from(this.container.querySelectorAll(".ExploreNav-lineProgress"));diamonds=Array.from(this.container.querySelectorAll(".ExploreNav-diamond"));innerDiamonds=Array.from(this.container.querySelectorAll(".innerDiamond"));outerDiamonds=Array.from(this.container.querySelectorAll(".outerDiamond"));highlightDiamonds=Array.from(this.container.querySelectorAll(".highlightDiamond"));highlightDiamondOuters=Array.from(this.container.querySelectorAll(".highlightDiamondOuter"));diamondLabels=Array.from(this.container.querySelectorAll(".ExploreNav-diamond span"));timeline;gotoChapter;linksTimeline=l.gsap.timeline({paused:!0});chapterLengths;expandTime=.01;ease="sine.inOut";dummyTime=0;dummyTime2=0;constructor(t){this.gotoChapter=t}setupTimeline(t){this.chapterLengths=t,this.timeline=l.gsap.timeline({paused:!0}),this.timeline.to(this,{dummyTime:1,duration:1},0),this.linksTimeline.to(this,{dummyTime2:1,duration:1},0);var e=0;const i=this.ease;t.forEach(((t,o)=>{let s=l.gsap.timeline({paused:!0});s.to(this.diamondLabels[o],{opacity:1,duration:this.expandTime,ease:i},0),s.to(this.highlightDiamonds[o],{opacity:1,duration:this.expandTime,ease:i},0),s.to(this.innerDiamonds[o],{opacity:0,scale:.2,duration:this.expandTime,ease:i},0),s.to(this.outerDiamonds[o],{opacity:0,duration:this.expandTime,ease:i},0),s.fromTo(this.highlightDiamondOuters[o],{scale:.8,opacity:0},{scale:1,opacity:.2,duration:this.expandTime,ease:i},0),s.to(this.linesInner[o],{yPercent:0,duration:this.expandTime,ease:i},0),s.to(this.linesProgress[o],{scaleY:1,duration:1-this.expandTime,ease:"none"},0),s.to(this.linesInner[o],{yPercent:-50,duration:this.expandTime,ease:i},1-this.expandTime),s.to(this.linesProgress[o],{scaleY:.535,opacity:0,duration:this.expandTime,ease:i},1-this.expandTime),s.to(this.diamondLabels[o],{opacity:0,duration:this.expandTime,ease:i},1-this.expandTime),s.to(this.highlightDiamonds[o],{opacity:0,duration:this.expandTime,ease:i},1-this.expandTime),s.to(this.innerDiamonds[o],{opacity:1,scale:1,duration:this.expandTime,ease:i},1-this.expandTime),s.to(this.outerDiamonds[o],{opacity:1,duration:this.expandTime,ease:i},1-this.expandTime),s.to(this.highlightDiamondOuters[o],{scale:.8,opacity:0,duration:this.expandTime,ease:i},1-this.expandTime),this.timeline.to(s,{progress:1,ease:"none",duration:t},e),e+=t})),this.timeline.to(this.linksTimeline,{progress:1,ease:"none",duration:1},0),this.links.forEach(((t,e)=>{const i=e;t.addEventListener("click",(t=>(t.preventDefault(),this.gotoChapter(i),!1)))})),window.addEventListener("resize",this.onResize),this.onResize()}onResize=()=>{window.innerWidth>=768&&window.innerHeight>=768?this.buildLinksDisplaceTimeline(!1):this.buildLinksDisplaceTimeline(!0)};buildLinksDisplaceTimeline(t=!1){var e=0,i=this.linksTimeline.progress();this.linksTimeline.pause(0).render(0).clear(),this.chapterLengths.forEach(((i,o)=>{let s=l.gsap.timeline({paused:!0});const a=this.links.slice(o+1,this.lines.length+1);s.to(a,{y:t?26:60,duration:this.expandTime,ease:this.ease},0),s.to(a,{y:0,duration:this.expandTime,ease:this.ease},1-this.expandTime),this.linksTimeline.to(s,{progress:1,ease:"none",duration:i},e),e+=i})),this.linksTimeline.progress(i)}}class ht extends Q{planetLink;planetLinkContainer=new o.Object3D;stationContainer;miningStation;miningStation2;asteroids;ringsWrapper=new o.Group;dollyZoom;dollyZoom2;dollyZoom3;dollyZoom4;dollyZoom5;dollyZoom6;dollyZoom7;CHAPTER_OFFSET=.005;SCROLL_LENGTH=15;miningStationPlanet;constructor(t,e,i,o,s,a,n,r,l,h,p){super(t,e,i,o,s,a,n,r,l,h,p),this.dollyZoom=new u(this.camera,this.cameraLookAtPoint),this.dollyZoom2=new u(this.camera,this.cameraLookAtPoint),this.dollyZoom3=new u(this.camera,this.cameraLookAtPoint),this.dollyZoom4=new u(this.camera,this.cameraLookAtPoint),this.dollyZoom5=new u(this.camera,this.cameraLookAtPoint),this.dollyZoom6=new u(this.camera,this.cameraLookAtPoint),this.dollyZoom7=new u(this.camera,this.cameraLookAtPoint),this.chapterWrapper.add(this.ringsWrapper)}getLoadItems(){return[["particles/mining_station/new2/0.drc","mining_station"],["particles/mining_station/planet/0.drc","planet"],["particles/multiple_asteroids/0.drc","asteroids"]]}itemLoaded=(t,e,i)=>{if("asteroids"===i){var s=new C({minOpacity:0,minBlur:.02,maxOpacity:.225,maxBlur:.21,focusNear:11,focusFar:90,focusFadeOutLength:3.76,radiusScaleFactor:100},this.menu,i),a=new o.Points(t,s);this.sortPoints.push(a),this.asteroids=a,a.scale.set(-1,1,1),a.position.set(-26.42,-2.03,-60),a.rotation.set(-.45,-.35,0),a.visible=!1,this.chapterWrapper.add(a)}else if("mining_station"===i){s=new C({focusNear:9.7,focusFar:60,focusFadeOutLength:3.76,minOpacity:0,maxOpacity:.7,maxBlur:.28,minBlur:.03,radiusScaleFactor:100},this.menu,i);(a=new o.Points(t,s)).scale.set(-1,1,1),this.sortPoints.push(a),this.miningStation=a,this.miningStation.rotation.y=.5*Math.PI,this.stationContainer=new o.Object3D,this.stationContainer.position.set(-5.7,-3.55,-8.83),this.stationContainer.rotation.y=.35,this.stationContainer.add(this.miningStation);var n=new C({focusNear:9.7,focusFar:60,focusFadeOutLength:3.76,minOpacity:0,maxOpacity:.7,maxBlur:.28,minBlur:.03,radiusScaleFactor:100},this.menu,i);this.miningStation2=new o.Points(t,n),this.miningStation2.scale.set(-1,1,1),this.miningStation2.name="miningStation2",this.miningStation2.position.set(-4.28,-1.28,36.32),this.miningStation2.rotation.set(-.45,-11.769,0),this.exploreAnchor.position.set(-4.9,.9,3.53),this.miningStation2.add(this.exploreAnchor),this.sortPoints.push(this.miningStation2),a=this.stationContainer,this.chapterWrapper.add(a),this.chapterWrapper.add(this.miningStation2)}else if("planet"===i){s=new C({focusNear:9.7,focusFar:41,focusFadeOutLength:3.76,minOpacity:0,maxOpacity:.589,maxBlur:.12,minBlur:.03,radiusScaleFactor:100},this.menu,i);(a=new o.Points(t,s)).scale.set(-1,1,1),this.sortPoints.push(a),this.miningStationPlanet=a,this.miningStationPlanet.rotation.y=.5*Math.PI+.35,this.miningStationPlanet.position.set(-5.7,-3.55,-8.83),this.chapterWrapper.add(a)}a.name=i};loadDone(){super.loadDone(),this.createChapterRings()}setupScrollTimeline=()=>{const t=this.duration,e=.1;this.scrollTimeline.set(this.chapterWrapper,{visible:!1},0),this.scrollTimeline.set(this.chapterWrapper,{visible:!0},.001),this.scrollTimeline.to(this,{scrollProgress:1,ease:"none",duration:this.duration},0),this.scrollTimeline.fromTo(this.chapterIntroClass.timeline,{progress:1},{progress:0,ease:"none",duration:.45*e},0),this.scrollTimeline.to(this.chapterIntroClass.timeline,{progress:1,ease:"none",duration:.03},.125),this.scrollTimeline.fromTo(this.ringsWrapper.position,{z:20},{z:0,ease:"none",duration:e},0),this.scrollTimeline.from(this.ringsMaterial.uniforms.maxOpacity,{value:0,duration:.05},.45*e),this.scrollTimeline.to(this.dollyZoom7,{totalProgress:1,duration:.75*e,ease:"power1.inOut",onUpdate:()=>this.dollyZoom7.update(15,4.32207356734125,55)},0),this.scrollTimeline.to(this.main.clusterCloud.material.uniforms.focusFar,{value:160,ease:"power1.inOut",duration:.75*e},0);const i=l.gsap.timeline({paused:!0});var o=l.gsap.timeline({paused:!0});o.to({dummy:0},{dummy:1,duration:100},0),o.to(this.ringsMaterial.uniforms.focusFar,{value:.01,ease:"power1.inOut",duration:4},0),o.to(this.ringsMaterial.uniforms.focusFadeOutLength,{value:24,ease:"sine.out",duration:5},0),o.to(this.main.clusterCloud.material.uniforms.focusFar,{value:51,ease:"sine.out",duration:4},0),o.to(this.main,{mousePanAmount:4,mouseMoveAmount:1,duration:10},0),o.to(this.dollyZoom,{totalProgress:1,duration:7,ease:"power1.inOut",onUpdate:()=>this.dollyZoom.update(110,100,15)},0),o.to(this.dollyZoom2,{totalProgress:1,duration:12,ease:"power1.inOut",onUpdate:()=>this.dollyZoom2.update(55,3,110)},10),o.to(this.dollyZoom3,{totalProgress:1,duration:6,ease:"sine.inOut",onUpdate:()=>this.dollyZoom3.update(110,20,55)},30),o.to(this.dollyZoom4,{totalProgress:1,duration:12,ease:"power1.inOut",onUpdate:()=>this.dollyZoom4.update(55,3,110)},40),o.to(this.dollyZoom5,{totalProgress:1,duration:6,ease:"sine.inOut",onUpdate:()=>this.dollyZoom5.update(110,20,55)},70),o.to(this.dollyZoom6,{totalProgress:1,duration:10,ease:"sine.inOut",onUpdate:()=>this.dollyZoom6.update(55,8,110)},80),i.to(o,{progress:1,ease:"none",duration:.9*t},0),i.to(this.chapterPOIs[0].timeline,{progress:1,ease:"none",duration:.25*t},.08),i.to(this.chapterPOIs[1].timeline,{progress:1,ease:"none",duration:.25*t},.4),i.set(this.asteroids,{visible:!0},0),i.fromTo(this.asteroids.material.uniforms.maxOpacity,{value:0},{value:.578,ease:"none",duration:.1*t},.05),i.to(this.asteroids.material.uniforms.minBlur,{value:.04,ease:"none",duration:.35*t},.1),i.fromTo(this.asteroids.rotation,{y:-.9},{y:.71,ease:"power1.inOut",duration:.5*t},0),i.fromTo(this.asteroids.position,{y:-4},{y:4,ease:"power1.inOut",duration:.5*t},.05),i.to(this.asteroids.position,{z:"+=3",ease:"power1.inOut",duration:.3*t},.1),i.to(this.asteroids.material.uniforms.maxOpacity,{value:0,ease:"none",duration:.1*t},.3),i.set(this.asteroids,{visible:!1},.8),i.from(this.miningStation.material.uniforms.maxOpacity,{value:0,ease:"none",duration:.1*t},.4),i.fromTo(this.stationContainer.rotation,{x:-.09,y:0},{x:0,y:.95,ease:"power1.in",duration:.45*t},.25),i.to(this.miningStationPlanet.position,{z:-26.48,ease:"power1.inOut",duration:.2*t},.6),i.from(this.miningStation2.material.uniforms.maxOpacity,{value:0,ease:"none",duration:.15*t},.71),i.from(this.miningStation2.rotation,{y:"+=1",ease:"power1.in",duration:1-.71},.71),i.to(this.miningStation2.position,{z:"-=10",ease:"power1.inOut",duration:1-.71},.71),i.to(this.miningStation2.position,{y:6.375,ease:"power1.in",duration:1-.71},.71),i.to(this.miningStation2.material.uniforms.maxOpacity,{value:0,ease:"none",duration:.01*t},.99),i.to(this.miningStation2.material.uniforms.minBlur,{value:.14,ease:"none",duration:.07*t},.93),i.to(this.miningStation2.material.uniforms.maxBlur,{value:.63,ease:"none",duration:.07*t},.93),i.to(this.miningStation2.material.uniforms.focusNear,{value:40.019,ease:"none",duration:.07*t},.93);var s=l.gsap.timeline({paused:!0,onUpdate:this.setActiveExploreItem});s.set(this.exploreButton.container,{pointerEvents:"none",duration:0},.19),s.set(this.exploreButton.container,{pointerEvents:"auto",duration:0},.2),s.to(this.exploreButton.container,{opacity:1,ease:"sine.out",duration:.2},.2),s.to(this.exploreButton.container,{opacity:0,ease:"sine.out",duration:.2},.8),s.set(this.exploreButton.container,{pointerEvents:"none",duration:0},1),i.to(s,{progress:1,ease:"none",duration:.24*t},.7);const a=$.CustomEase.create("custom","M0,0 C0.632,0.674 0.656,0.708 0.786,0.854 0.852,0.928 0.918,1 1,1 ");return i.to(this.cameraWrapper.position,{z:130+122*(this.index-1),ease:a,duration:this.duration},0),i.to(this.cameraLookAtPoint.position,{z:150+this.CHAPTER_DISTANCE*(this.index-1),ease:a,duration:this.duration},0),i.to(this.main,{mousePanAmount:2,mouseMoveAmount:2,duration:.1},.9),this.scrollTimeline.to(i,{progress:1,duration:this.duration-e,ease:"none"},e),this.scrollTimeline.set(this.chapterWrapper,{visible:!0},.999),this.scrollTimeline.set(this.chapterWrapper,{visible:!1},1),this.scrollTimeline};createChapterRings(){for(let t=0;t<14;t++){const e=new f(this.ringsWrapper,10,100,0,2*Math.PI,this.menu,"ring",new o.Color(524802),null,this.ringsMaterial);this.rings.push(e),e.points.position.z=10-10*t,l.gsap.to(e.points.rotation,{z:Math.PI,duration:50+10*t,repeat:-1,ease:"none"})}}}class pt extends Q{capitalShipContainer;capitalShipContainer2;capitalShipContainer3;capitalShip;calicoYachtContainer;calicoYacht;cosmonautContainer;cosmonaut;ringsWrapper=new o.Group;dollyZoom;dollyZoom2;dollyZoom3;dollyZoom4;dollyZoom5;dollyZoom6;dollyZoom7;CHAPTER_OFFSET=.01;SCROLL_LENGTH=15;capitalShip2;capitalShip3;constructor(t,e,i,o,s,a,n,r,l,h,p){super(t,e,i,o,s,a,n,r,l,h,p),this.dollyZoom=new u(this.camera,this.cameraLookAtPoint),this.dollyZoom2=new u(this.camera,this.cameraLookAtPoint),this.dollyZoom3=new u(this.camera,this.cameraLookAtPoint),this.dollyZoom4=new u(this.camera,this.cameraLookAtPoint),this.dollyZoom5=new u(this.camera,this.cameraLookAtPoint),this.dollyZoom6=new u(this.camera,this.cameraLookAtPoint),this.dollyZoom7=new u(this.camera,this.cameraLookAtPoint),this.chapterWrapper.add(this.ringsWrapper)}getLoadItems(){return[["particles/capital_ship/0.drc","capital_ship"],["particles/calico_yacht/new/0.drc","calico_yacht"],["particles/cosmonaut/0.drc","cosmonaut"]]}itemLoaded=(t,e,i)=>{if("cosmonaut"===i){var s=new C({useFocusCenter:!1,focusNear:7.5,focusFar:18.5,focusFadeOutLength:3.766,minOpacity:0,maxOpacity:.335,maxBlur:.46,radiusScaleFactor:100,minBlur:.07},this.menu,i);(a=new o.Points(t,s)).scale.set(-1,1,1),this.sortPoints.push(a),this.cosmonaut=a,this.cosmonaut.position.x=-3.8,this.cosmonautContainer=new o.Object3D,this.cosmonautContainer.position.set(0,-4.27,-13.76),this.cosmonautContainer.add(this.cosmonaut),l.gsap.to(this.cosmonaut.position,{y:.5,ease:"sine.inOut",repeat:-1,yoyo:!0,duration:5}),a=this.cosmonautContainer}else if("capital_ship"===i){this.capitalShipContainer=new o.Object3D,this.capitalShipContainer.position.set(0,7,-20),this.capitalShipContainer2=new o.Object3D,this.capitalShipContainer2.position.set(0,-.63,40),this.capitalShipContainer3=new o.Object3D,this.capitalShipContainer3.position.set(0,-.63,40);s=new C({useFocusCenter:!1,focusNear:10,focusFar:50,focusFadeOutLength:9.5,minOpacity:0,maxOpacity:.214,maxBlur:.2,radiusScaleFactor:100,minBlur:.05},this.menu,i);(a=new o.Points(t,s)).scale.set(-1,1,1),this.sortPoints.push(a),this.capitalShip=a,this.capitalShip2=new o.Points(t,s),this.capitalShip2.scale.set(-1,1,1),this.capitalShipContainer2.rotation.set(-.08,.33,0),this.sortPoints.push(this.capitalShip2),this.capitalShipContainer2.add(this.capitalShip2),this.capitalShip3=new o.Points(t,s),this.capitalShip3.scale.set(-1,1,1),this.capitalShipContainer3.rotation.set(-.08,-.33,0),this.sortPoints.push(this.capitalShip3),this.capitalShipContainer3.add(this.capitalShip3),this.exploreAnchor.position.y=2.8,this.capitalShip.add(this.exploreAnchor),this.capitalShipContainer.add(this.capitalShip),this.chapterWrapper.add(this.capitalShipContainer2),this.chapterWrapper.add(this.capitalShipContainer3),a=this.capitalShipContainer}else if("calico_yacht"===i){var a;s=new C({useFocusCenter:!1,focusNear:7.5,focusFar:18.5,focusFadeOutLength:3.766,minOpacity:0,maxOpacity:.214,maxBlur:.46,radiusScaleFactor:100,minBlur:.05},this.menu,i);(a=new o.Points(t,s)).scale.set(-1,1,1),this.sortPoints.push(a),this.calicoYacht=a,this.calicoYachtContainer=new o.Object3D,this.calicoYachtContainer.position.set(0,0,-77),this.calicoYachtContainer.rotation.x=-1,this.calicoYachtContainer.add(this.calicoYacht),l.gsap.to(a.rotation,{y:2*Math.PI,ease:"none",repeat:-1,duration:200}),l.gsap.to(a.position,{y:.5,ease:"sine.inOut",repeat:-1,yoyo:!0,duration:5}),a=this.calicoYachtContainer}a.name=i,this.chapterWrapper.add(a)};loadDone(){super.loadDone(),this.createChapterRings()}setupScrollTimeline=()=>{const t=this.duration,e=.1;this.scrollTimeline.set(this.chapterWrapper,{visible:!1},0),this.scrollTimeline.set(this.chapterWrapper,{visible:!0},.001),this.scrollTimeline.to(this,{scrollProgress:1,ease:"none",duration:this.duration},0),this.scrollTimeline.fromTo(this.chapterIntroClass.timeline,{progress:1},{progress:0,ease:"none",duration:.45*e},0),this.scrollTimeline.to(this.chapterIntroClass.timeline,{progress:1,ease:"none",duration:.03},.125),this.scrollTimeline.fromTo(this.ringsWrapper.position,{z:20},{z:0,ease:"none",duration:e},0),this.scrollTimeline.from(this.ringsMaterial.uniforms.maxOpacity,{value:0,duration:.05},.45*e),this.scrollTimeline.to(this.dollyZoom7,{totalProgress:1,duration:.75*e,ease:"power1.inOut",onUpdate:()=>this.dollyZoom7.update(15,4.32207356734125,55)},0),this.scrollTimeline.to(this.main.clusterCloud.material.uniforms.focusFar,{value:160,ease:"power1.inOut",duration:.75*e},0);const i=l.gsap.timeline({paused:!0});var o=l.gsap.timeline({paused:!0});o.to({dummy:0},{dummy:1,duration:100},0),o.to(this.ringsMaterial.uniforms.focusFar,{value:.01,ease:"power1.inOut",duration:4},0),o.to(this.ringsMaterial.uniforms.focusFadeOutLength,{value:24,ease:"sine.out",duration:5},0),o.to(this.main.clusterCloud.material.uniforms.focusFar,{value:51,ease:"sine.out",duration:4},0),o.to(this.main,{mousePanAmount:4,mouseMoveAmount:1,duration:10},0),o.to(this.dollyZoom,{totalProgress:1,duration:7,ease:"power1.inOut",onUpdate:()=>this.dollyZoom.update(110,100,15)},0),o.to(this.dollyZoom2,{totalProgress:1,duration:12,ease:"power1.inOut",onUpdate:()=>this.dollyZoom2.update(55,3,110)},10),o.to(this.dollyZoom3,{totalProgress:1,duration:6,ease:"sine.inOut",onUpdate:()=>this.dollyZoom3.update(110,20,55)},30),o.to(this.dollyZoom4,{totalProgress:1,duration:12,ease:"power1.inOut",onUpdate:()=>this.dollyZoom4.update(55,3,110)},40),o.to(this.dollyZoom5,{totalProgress:1,duration:6,ease:"sine.inOut",onUpdate:()=>this.dollyZoom5.update(110,20,55)},70),o.to(this.dollyZoom6,{totalProgress:1,duration:10,ease:"sine.inOut",onUpdate:()=>this.dollyZoom6.update(55,8,110)},80),i.to(o,{progress:1,ease:"none",duration:.9*t},0),i.from(this.calicoYacht.material.uniforms.maxOpacity,{value:0,ease:"none",duration:.1*t},0),i.to(this.calicoYachtContainer.position,{z:-60,ease:"sine.inOut",duration:.25*t},.2),i.to(this.calicoYacht.rotation,{x:.91,ease:"sine.out",duration:.3*t},.2),i.from(this.cosmonaut.material.uniforms.maxOpacity,{value:0,ease:"none",duration:.4*t},.3),i.fromTo(this.cosmonaut.material.uniforms.focusFar,{value:31.785},{value:25.785,ease:"none",duration:.2*t},.3),i.from(this.cosmonaut.material.uniforms.maxBlur,{value:.05,ease:"none",duration:.4*t},.3),i.fromTo(this.cosmonautContainer.rotation,{y:0},{y:-.438,ease:"none",duration:.5*t},.3),i.from(this.cosmonautContainer.position,{z:-26.307,y:-6.32,ease:"none",duration:.4*t},.3),i.fromTo(this.cosmonaut.rotation,{y:-.95},{y:1.35,ease:"power1.inOut",duration:.4*t},.3),i.to(this.cosmonaut.position,{x:.74,ease:"sine.inOut",duration:.4*t},.3),i.from(this.capitalShip.material.uniforms.maxOpacity,{value:0,ease:"none",duration:.1*t},.65),i.to(this.capitalShip.material.uniforms.focusFadeOutLength,{value:9,ease:"none",duration:.1*t},.6),i.to(this.capitalShip.material.uniforms.focusNear,{value:12,ease:"none",duration:.1*t},.6),i.to(this.capitalShipContainer.position,{y:-.63,z:40,ease:"power3.out",duration:.2*t},.7),i.fromTo(this.capitalShip2.position,{z:-60,x:16,y:0},{x:12.77,z:5,y:-5.22,ease:"power3.out",duration:.1*t},.74),i.fromTo(this.capitalShip3.position,{z:-60,x:-16,y:0},{x:-12.77,z:5,y:-5.22,ease:"power3.out",duration:.1*t},.75),i.to(this.capitalShip.position,{z:-51,ease:"power3.in",duration:.1*t},.9),i.to(this.capitalShip2.position,{z:51,ease:"power3.in",duration:.1*t},.9),i.to(this.capitalShip3.position,{z:51,ease:"power3.in",duration:.1*t},.9),i.to(this.chapterPOIs[0].timeline,{progress:1,ease:"none",duration:.25*t},.08),i.to(this.chapterPOIs[1].timeline,{progress:1,ease:"none",duration:.25*t},.4);var s=l.gsap.timeline({paused:!0,onUpdate:this.setActiveExploreItem});s.set(this.exploreButton.container,{pointerEvents:"none",duration:0},.19),s.set(this.exploreButton.container,{pointerEvents:"auto",duration:0},.2),s.to(this.exploreButton.container,{opacity:1,ease:"sine.out",duration:.2},.2),s.to(this.exploreButton.container,{opacity:0,ease:"sine.out",duration:.2},.8),s.set(this.exploreButton.container,{pointerEvents:"none",duration:0},1),i.to(s,{progress:1,ease:"none",duration:.25*t},.7);const a=$.CustomEase.create("custom","M0,0 C0.632,0.674 0.656,0.708 0.786,0.854 0.852,0.928 0.918,1 1,1 ");return i.to(this.cameraWrapper.position,{z:130+122*(this.index-1),ease:a,duration:this.duration},0),i.to(this.cameraLookAtPoint.position,{z:150+this.CHAPTER_DISTANCE*(this.index-1),ease:a,duration:this.duration},0),i.to(this.main,{mousePanAmount:2,mouseMoveAmount:2,duration:.1},.9),this.scrollTimeline.to(i,{progress:1,duration:this.duration-e,ease:"none"},e),this.scrollTimeline.set(this.chapterWrapper,{visible:!0},.999),this.scrollTimeline.set(this.chapterWrapper,{visible:!1},1),this.scrollTimeline};createChapterRings(){for(let t=0;t<15;t++){const e=new f(this.ringsWrapper,10,100,0,2*Math.PI,this.menu,"ring",new o.Color(524802),null,this.ringsMaterial);this.rings.push(e),e.points.position.z=20-10*t,l.gsap.to(e.points.rotation,{z:Math.PI,duration:50+10*t,repeat:-1,ease:"none"})}}}class ct extends Q{usturFaceContainer;usturFace;usturContainer;ustur;councilOfPeaceContainer;councilOfPeace;ringsWrapper=new o.Group;dollyZoom;dollyZoom2;dollyZoom3;dollyZoom4;dollyZoom5;dollyZoom6;dollyZoom7;CHAPTER_OFFSET=.01;SCROLL_LENGTH=15;endScreen=document.querySelector(".EndScreen");endScreenItems=document.querySelectorAll(".EndScreen .fadeIn");constructor(t,e,i,o,s,a,n,r,h,p,c){super(t,e,i,o,s,a,n,r,h,p,c),this.dollyZoom=new u(this.camera,this.cameraLookAtPoint),this.dollyZoom2=new u(this.camera,this.cameraLookAtPoint),this.dollyZoom3=new u(this.camera,this.cameraLookAtPoint),this.dollyZoom4=new u(this.camera,this.cameraLookAtPoint),this.dollyZoom5=new u(this.camera,this.cameraLookAtPoint),this.dollyZoom6=new u(this.camera,this.cameraLookAtPoint),this.dollyZoom7=new u(this.camera,this.cameraLookAtPoint),this.chapterWrapper.add(this.ringsWrapper),l.gsap.set(this.endScreenItems,{opacity:0,force3D:!0})}getLoadItems(){return[["particles/ustur/face/0.drc","ustur_face"],["particles/ustur/new/0.drc","ustur"],["particles/council_of_peace/0.drc","council_of_peace"]]}itemLoaded=(t,e,i)=>{if("council_of_peace"===i){var s=new C({useFocusCenter:!1,focusNear:7.5,focusFar:18.5,focusFadeOutLength:3.766,minOpacity:0,maxOpacity:.335,maxBlur:.46,radiusScaleFactor:100,minBlur:.07},this.menu,i);(a=new o.Points(t,s)).scale.set(-1,1,1),this.sortPoints.push(a),this.councilOfPeace=a,this.councilOfPeaceContainer=new o.Object3D,this.councilOfPeaceContainer.position.set(0,-6.11,-31.85),this.councilOfPeaceContainer.add(this.councilOfPeace),l.gsap.to(this.councilOfPeace.position,{y:.5,ease:"sine.inOut",repeat:-1,yoyo:!0,duration:5}),a=this.councilOfPeaceContainer}else if("ustur_face"===i){s=new C({useFocusCenter:!1,focusNear:10,focusFar:50,focusFadeOutLength:9.5,minOpacity:0,maxOpacity:.214,maxBlur:.2,radiusScaleFactor:100,minBlur:.05},this.menu,i);(a=new o.Points(t,s)).scale.set(-1,1,1),this.sortPoints.push(a),this.usturFace=a,this.usturFaceContainer=new o.Object3D,this.usturFaceContainer.position.set(0,7,-20),this.usturFaceContainer.add(this.exploreAnchor),this.exploreAnchor.position.set(3.81,2.9,0),this.usturFace.add(this.exploreAnchor),this.usturFaceContainer.add(this.usturFace),a=this.usturFaceContainer}else if("ustur"===i){var a;s=new C({useFocusCenter:!1,focusNear:7.5,focusFar:18.5,focusFadeOutLength:3.766,minOpacity:0,maxOpacity:.236,maxBlur:.46,radiusScaleFactor:100,minBlur:.05},this.menu,i);(a=new o.Points(t,s)).scale.set(-1,1,1),this.sortPoints.push(a),this.ustur=a,this.usturContainer=new o.Object3D,this.usturContainer.position.set(0,-2.79,-77),this.ustur.rotation.y=-.8,this.usturContainer.add(this.ustur),l.gsap.to(this.ustur.position,{y:.5,ease:"sine.inOut",repeat:-1,yoyo:!0,duration:5}),a=this.usturContainer}a.name=i,this.chapterWrapper.add(a)};loadDone(){super.loadDone(),this.createChapterRings()}setupScrollTimeline=()=>{const t=this.duration,e=.1;this.scrollTimeline.set(this.chapterWrapper,{visible:!1},0),this.scrollTimeline.set(this.chapterWrapper,{visible:!0},.001),this.scrollTimeline.to(this,{scrollProgress:1,ease:"none",duration:this.duration},0),this.scrollTimeline.fromTo(this.chapterIntroClass.timeline,{progress:1},{progress:0,ease:"none",duration:.45*e},0),this.scrollTimeline.to(this.chapterIntroClass.timeline,{progress:1,ease:"none",duration:.03},.125),this.scrollTimeline.fromTo(this.ringsWrapper.position,{z:20},{z:0,ease:"none",duration:e},0),this.scrollTimeline.from(this.ringsMaterial.uniforms.maxOpacity,{value:0,duration:.05},.45*e),this.scrollTimeline.to(this.dollyZoom7,{totalProgress:1,duration:.75*e,ease:"power1.inOut",onUpdate:()=>this.dollyZoom7.update(15,4.32207356734125,55)},0),this.scrollTimeline.to(this.main.clusterCloud.material.uniforms.focusFar,{value:160,ease:"power1.inOut",duration:.75*e},0);const i=l.gsap.timeline({paused:!0});var o=l.gsap.timeline({paused:!0});o.to({dummy:0},{dummy:1,duration:100},0),o.to(this.ringsMaterial.uniforms.focusFar,{value:.01,ease:"power1.inOut",duration:4},0),o.to(this.ringsMaterial.uniforms.focusFadeOutLength,{value:24,ease:"sine.out",duration:5},0),o.to(this.main.clusterCloud.material.uniforms.focusFar,{value:51,ease:"sine.out",duration:4},0),o.to(this.main,{mousePanAmount:4,mouseMoveAmount:1,duration:10},0),o.to(this.dollyZoom,{totalProgress:1,duration:7,ease:"power1.inOut",onUpdate:()=>this.dollyZoom.update(110,100,15)},0),o.to(this.dollyZoom2,{totalProgress:1,duration:12,ease:"power1.inOut",onUpdate:()=>this.dollyZoom2.update(55,3,110)},10),o.to(this.dollyZoom3,{totalProgress:1,duration:6,ease:"sine.inOut",onUpdate:()=>this.dollyZoom3.update(110,20,55)},30),o.to(this.dollyZoom4,{totalProgress:1,duration:12,ease:"power1.inOut",onUpdate:()=>this.dollyZoom4.update(55,3,110)},40),o.to(this.dollyZoom5,{totalProgress:1,duration:6,ease:"sine.inOut",onUpdate:()=>this.dollyZoom5.update(110,20,55)},70),o.to(this.dollyZoom6,{totalProgress:1,duration:10,ease:"sine.inOut",onUpdate:()=>this.dollyZoom6.update(55,8,110)},80),i.to(o,{progress:1,ease:"none",duration:.9*t},0),i.from(this.ustur.material.uniforms.maxOpacity,{value:0,ease:"none",duration:.1*t},0),i.from(this.ustur.material.uniforms.maxBlur,{value:.1,ease:"none",duration:.3*t},0),i.to(this.usturContainer.position,{z:-65,ease:"sine.in",duration:.3*t},.1),i.to(this.ustur.rotation,{x:0,y:0,ease:"sine.out",duration:.5*t},0),i.to(this.usturContainer.position,{y:-2.643,ease:"sine.out",duration:.4*t},0),i.to(this.councilOfPeace.material.uniforms.focusFar,{value:35.785,ease:"none",duration:.3*t},.1),i.from(this.councilOfPeace.material.uniforms.maxBlur,{value:.05,ease:"none",duration:.4*t},.3),i.from(this.councilOfPeace.material.uniforms.minBlur,{value:.01,ease:"none",duration:.6*t},.1),i.fromTo(this.councilOfPeace.rotation,{y:1.19},{y:0,ease:"none",duration:.4},.3),i.to(this.councilOfPeaceContainer.position,{y:0,ease:"power1.out",duration:.3*t},.3),i.to(this.councilOfPeaceContainer.position,{z:-12.95,ease:"none",duration:.4*t},.3),i.to(this.councilOfPeaceContainer.position,{y:30,ease:"power1.in",duration:.1*t},.6),i.from(this.usturFace.material.uniforms.maxOpacity,{value:0,ease:"none",duration:.1*t},.65),i.to(this.usturFace.material.uniforms.focusFadeOutLength,{value:9,ease:"none",duration:.1*t},.6),i.to(this.usturFace.material.uniforms.focusNear,{value:12,ease:"none",duration:.1*t},.6),i.to(this.usturFaceContainer.position,{y:-.63,z:40,ease:"power3.out",duration:.2*t},.7),i.to(this.chapterPOIs[0].timeline,{progress:1,ease:"none",duration:.25*t},.08),i.to(this.chapterPOIs[1].timeline,{progress:1,ease:"none",duration:.25*t},.4);var s=l.gsap.timeline({paused:!0,onUpdate:this.setActiveExploreItem});s.set(this.exploreButton.container,{pointerEvents:"none",duration:0},.19),s.set(this.exploreButton.container,{pointerEvents:"auto",duration:0},.2),s.to(this.exploreButton.container,{opacity:1,ease:"sine.out",duration:.2},.2),s.to(this.exploreButton.container,{opacity:0,ease:"sine.out",duration:.2},.8),i.to(s,{progress:1,ease:"none",duration:.25*t},.7);const a=$.CustomEase.create("custom","M0,0 C0.632,0.674 0.656,0.708 0.786,0.854 0.852,0.928 0.918,1 1,1 ");return i.fromTo(this.endScreenItems,{opacity:0},{opacity:1,duration:.05*t,force3D:!0},.95),i.set(this.endScreen,{pointerEvents:"auto"},.955),i.to(this.usturFaceContainer.position,{x:9.49,y:4.56,ease:"power1.inOut",duration:.1*t},.9),i.to(this.usturFaceContainer.rotation,{y:.7,ease:"power2.inOut",duration:.12*t},.88),i.to(this.usturFace.material.uniforms.focusNear,{value:23.65,ease:"power1.inOut",duration:.12*t},.88),i.to(this.usturFace.material.uniforms.focusFadeOutLength,{value:2.723,ease:"power1.inOut",duration:.12*t},.88),i.to(this.usturFace.material.uniforms.maxBlur,{value:.35,ease:"power1.inOut",duration:.12*t},.88),i.to(this.cameraWrapper.position,{z:130+122*(this.index-1),ease:a,duration:this.duration},0),i.to(this.cameraLookAtPoint.position,{z:150+this.CHAPTER_DISTANCE*(this.index-1),ease:a,duration:this.duration},0),this.scrollTimeline.to(i,{progress:1,duration:this.duration-e,ease:"none"},e),this.scrollTimeline};createChapterRings(){for(let t=0;t<16;t++){const e=new f(this.ringsWrapper,10,100,0,2*Math.PI,this.menu,"ring",new o.Color(524802),null,this.ringsMaterial);this.rings.push(e),e.points.position.z=30-10*t,l.gsap.to(e.points.rotation,{z:Math.PI,duration:50+10*t,repeat:-1,ease:"none"})}}}var dt=i(82354),mt=i(31739),Dt=i(3342);l.gsap.registerPlugin(mt.InertiaPlugin,dt.Draggable);class gt{items;container=document.getElementById("LandingGallery");imageContainer=this.container.querySelector(".LandingGallery-images");imageContainerInner=this.container.querySelector(".LandingGallery-imagesInner");title=this.container.querySelector(".LandingGallery-description h3");descriptionWrapper=this.container.querySelector(".LandingGallery-descriptionWrapper");description=this.container.querySelector(".LandingGallery-description p");closeButton=this.container.querySelector(".LandingGallery-close");navButtons=this.container.querySelectorAll(".LandingGallery-nav");jumpNavContainer=this.container.querySelector(".LandingGallery-jumpNav");visible=!1;draggable;width=0;animation;wrap;snapX;progressWrap=l.gsap.utils.wrap(0,1);wrapWidth=0;proxy;slides=[];slideAnimation=l.gsap.to({},{});slideDuration=.75;currSnapIndex=0;currSnapX=0;totalSlides=0;jumpNavContainerAnchors=[];constructor(){this.closeButton.addEventListener("click",this.closeClickHandler),this.proxy=document.createElement("div"),window.addEventListener("resize",this.resize),this.resize(),this.draggable=new dt.Draggable(this.proxy,{trigger:m.GlobalsLanding.IS_ANDROID?this.imageContainer:this.container,inertia:!0,onPress:this.onPress,onRelease:this.onRelease,onDrag:this.updateProgress,onThrowUpdate:this.updateProgress,onThrowComplete:()=>this.toggleCaption(!0,!0),snap:{x:t=>(this.currSnapX=this.snapX(t),this.currSnapIndex=this.getSnapIndex(this.currSnapX),this.currSnapX)}}),this.navButtons[0].addEventListener("click",(t=>(t.preventDefault(),this.killDragThrow(t),this.animateSlides(1),!1))),this.navButtons[1].addEventListener("click",(t=>(t.preventDefault(),this.killDragThrow(t),this.animateSlides(-1),!1)))}killDragThrow(t){this.draggable.endDrag(t),this.draggable.tween&&this.draggable.tween.progress(1)}onPress=()=>{this.toggleCaption(!1),this.updateDraggable()};onRelease=()=>{this.draggable.isThrowing&&this.draggable.tween&&1!==this.draggable.tween.progress()||this.toggleCaption(!0)};toggleCaption=(t=!1,e=!1)=>{t?l.gsap.to(this.descriptionWrapper,{opacity:1,duration:.2,delay:e?0:this.slideDuration,onStart:()=>{this.title.textContent=this.items[this.currSnapIndex].title,this.description.textContent=this.items[this.currSnapIndex].description}}):(l.gsap.killTweensOf(this.descriptionWrapper),l.gsap.to(this.descriptionWrapper,{opacity:0,duration:.2}))};getSnapIndex(t,e=!0){e&&this.jumpNavContainerAnchors[this.currSnapIndex].classList.remove("active");let i=Math.round((1-this.progressWrap(t/this.wrapWidth))*this.totalSlides);return i=i===this.totalSlides?0:i,e&&this.jumpNavContainerAnchors[i].classList.add("active"),i}animateSlides=t=>{let e=l.gsap.getProperty(this.proxy,"x");this.slideAnimation.isActive()&&(e=this.slideAnimation.vars.x),this.slideAnimation.kill();var i=this.snapX(e+t*this.width);this.currSnapIndex=this.getSnapIndex(i),this.slideAnimation=l.gsap.to(this.proxy,{x:i,ease:"power3.inOut",duration:this.slideDuration,onUpdate:this.updateProgress})};resize=()=>{this.items&&(this.draggable.tween&&this.draggable.tween.progress(1),this.animateSlides(0),this.slideAnimation.progress(1)),this.width=this.container.clientWidth,this.snapX=l.gsap.utils.snap(this.width),this.updateSize()};updateSize=()=>{var t=l.gsap.getProperty(this.proxy,"x")/this.wrapWidth||0;this.wrapWidth=this.width*this.totalSlides,l.gsap.set(this.proxy,{x:t*this.wrapWidth})};updateDraggable=()=>{this.slideAnimation.kill(),this.draggable.update(),this.updateProgress()};updateProgress=()=>{this.animation.progress(this.progressWrap(l.gsap.getProperty(this.proxy,"x")/this.wrapWidth))};setGalleryItems(t){this.items!==t&&(this.items=t,this.slides.forEach((t=>this.imageContainerInner.removeChild(t))),this.jumpNavContainerAnchors.forEach((t=>this.jumpNavContainer.removeChild(t))),this.jumpNavContainerAnchors=[],this.slides=this.items.map(((t,e)=>{const i=document.createElement("img");i.onload=()=>{i.classList.add("loaded")},i.sizes="100vw";const o=Dt.Globals.WEBP_SUPPORTED?"webp":"jpg";i.srcset="".concat(t.url,"?w=2000&h=2000&q=80&fm=").concat(o," 1000w, ").concat(t.url,"?w=4000&h=2880&q=80&fm=").concat(o," 4000w"),l.gsap.set(i,{xPercent:100*e}),this.imageContainerInner.appendChild(i);const s=document.createElement("a");return s.href="#slide-"+e,s.slideIndex=e,0===e&&s.classList.add("active"),s.addEventListener("click",this.jumpAnchorClickHandler),this.jumpNavContainerAnchors.push(s),this.jumpNavContainer.appendChild(s),i})),this.currSnapIndex=0,this.currSnapX=0,this.totalSlides=this.items.length,this.totalSlides>0&&(this.title.textContent=this.items[0].title,this.description.textContent=this.items[0].description),this.wrap=l.gsap.utils.wrap(-100,100*(this.totalSlides-1)),l.gsap.set(this.proxy,{x:0}),this.totalSlides>1?(this.draggable.enable(),this.animation=l.gsap.to(this.slides,{xPercent:"+="+100*this.slides.length,duration:1,ease:"none",paused:!0,repeat:-1,modifiers:{xPercent:this.wrap}}),this.container.classList.remove("single")):(this.container.classList.add("single"),this.animation=l.gsap.to({},{}),this.draggable.disable()),this.updateSize(),this.updateDraggable(),this.updateProgress())}show(){this.visible=!0,l.gsap.to(this.container,{duration:.5,autoAlpha:1})}hide(){this.visible=!1,l.gsap.to(this.container,{duration:.5,autoAlpha:0})}closeClickHandler=t=>(t.preventDefault(),this.visible&&this.hide(),!1);jumpAnchorClickHandler=t=>{t.preventDefault();const e=t.currentTarget.slideIndex;this.killDragThrow(t);let i=l.gsap.getProperty(this.proxy,"x");this.slideAnimation.kill();let o=this.getSnapIndex(i,!1)-e;var s=this.snapX(i+o*this.width);return this.currSnapIndex=this.getSnapIndex(s),this.slideAnimation=l.gsap.to(this.proxy,{x:s,ease:"power3.inOut",duration:this.slideDuration,onUpdate:this.updateProgress}),!1}}var yt=i(91125);class Ct{audioElement=document.getElementById("AmbientAudio");soundToggle=document.body.querySelector(".SoundMute");playing=!0;enabled=!1;constructor(){this.audioElement.volume=0,m.GlobalsLanding.AmbientAudio=this}loadAudio=()=>{this.audioElement.src=this.audioElement.dataset.src,this.soundToggle.addEventListener("click",this.toggleSound)};enableAudio=()=>{this.audioElement.play(),this.enabled=!0,window.removeEventListener("click",this.enableAudio),l.gsap.to(this.audioElement,{volume:1,duration:3})};toggleSound=()=>{this.playing?(this.playing=!1,this.audioElement.pause(),this.soundToggle.classList.add("off")):(this.playing=!0,this.audioElement.play(),this.soundToggle.classList.remove("off"))};stop(){this.enabled&&this.playing&&this.audioElement.pause()}resume(){this.enabled&&this.playing&&this.audioElement.play()}}var ft=i(25108);class Ft{_camera;_scene;_renderer;_clock;_mainGroup=new o.Group;widthHalf;heightHalf;width;height;windowWidth;windowHeight;postEffects;AppContainer=document.getElementById("App");ViewContainer=document.getElementById("ViewContainer");ScrollSpacer=document.getElementById("ScrollSpacer");MouseMoveTracker=new c.MouseMoveTracker;USE_SCROLL_TIMER=CSS.supports("contain","content");cameraWrapper;cameraLookAtPoint=new o.Object3D;_cameraLookAtVector=new o.Vector3;eye;clickMouseEnter;diamondMouseEnter;landingEnterHitArea;spotLight;dirLight;ambientValue=0;currentMasterScrollProgress=0;landingSkipped=!1;chapterPOITitles=Array.from(document.querySelectorAll(".ChapterPOIs > div"));mouseMoveAmount=.2;mousePanAmount=5;activeExploreAnchor=null;chapters=[];loadManager;introDollyZoom;renderEffects=!0;_controls;stats;menu;debugCamera;DEBUG_MODE=!1;DebugHelpers=[];SKIP_INTRO=new URLSearchParams(window.location.search).get("skipIntro");SKIP_LOAD_ANIMATION=new URLSearchParams(window.location.search).get("skipLoadAni");container;clusterCloud;exploreNav;chapterPositions=[];scrollHeight=0;gallery=new gt;exploreButton=new E(this.gallery,this);currentExploreChapter;requestAnimationFrameID=null;ambientAudio=new Ct;scrollTriggerReady=!1;scrollTrigger=null;constructor(t){if(yt.WEBGL.isWebGLAvailable())this._clock=new o.Clock,m.GlobalsLanding.DEBUG&&(this.menu=new a.GUI),m.GlobalsLanding.MainScene=this,this.init(t),this.animate(),document.addEventListener("visibilitychange",(()=>{document.hidden?(this._clock.stop(),this.ambientAudio.stop()):(this._clock.start(),this.ambientAudio.resume())}),!1);else{const t=yt.WEBGL.getWebGLErrorMessage();document.getElementById("TemplateLayer").children[0].appendChild(t)}}init=t=>{this.container=t,l.gsap.registerPlugin(h.ScrollTrigger,p.ScrollToPlugin),m.GlobalsLanding.USE_STICKY&&!m.GlobalsLanding.IS_SAFARI&&(t.style.zIndex="-1"),this.USE_SCROLL_TIMER||document.querySelector(".ScrollTimer").remove(),m.GlobalsLanding.USE_STICKY?h.ScrollTrigger.defaults({scroller:this.AppContainer,trigger:this.ScrollSpacer}):document.documentElement.classList.add("non-sticky"),this.loadManager=new at(this.loadDone),l.gsap.set(".ChapterPOIs",{autoAlpha:0}),l.gsap.set(".BottomBar-right",{autoAlpha:0}),l.gsap.set(this.chapterPOITitles,{opacity:0,force3D:!0}),this.ScrollSpacer.style.height="auto",this.width=this.ViewContainer.clientWidth,this.height=this.ViewContainer.clientHeight,l.gsap.to(this,{ambientValue:1,duration:4,ease:"sine.inOut",repeat:-1,yoyo:!0}),this._camera=new o.PerspectiveCamera(65,this.width/this.height,1,200),this._scene=new o.Scene,this.cameraWrapper=new o.Object3D,this.cameraWrapper.add(this._camera),this._scene.add(this.cameraWrapper),this._scene.background=new o.Color(15854305),this.introDollyZoom=new u(this._camera,this.cameraLookAtPoint),this._renderer=new o.WebGLRenderer({antialias:!this.renderEffects,stencil:!this.renderEffects,depth:!this.renderEffects,powerPreference:"high-performance",premultipliedAlpha:m.GlobalsLanding.PREMULTIPLY_ALPHA}),this._renderer.setPixelRatio(m.GlobalsLanding.RENDERER_PIXEL_RATIO),this._renderer.setSize(this.width,this.height),m.GlobalsLanding.RENDERER_HEIGHT=this.height,C.texCircleSolid=this.loadManager.loadTexture("circle_solid_32x32_premultiplied.png"),C.texCircleAlpha=this.loadManager.loadTexture("circle_alpha_32x32_premultiplied.png"),C.texCircleSolid.premultiplyAlpha=m.GlobalsLanding.PREMULTIPLY_ALPHA,C.texCircleAlpha.premultiplyAlpha=m.GlobalsLanding.PREMULTIPLY_ALPHA,this.postEffects=new r(this._scene,this._camera,this._renderer,this.menu,this._clock,this.renderEffects),t.appendChild(this._renderer.domElement),this._scene.add(this._mainGroup),this._scene.add(this.cameraLookAtPoint),this.setupLights(),m.GlobalsLanding.DEBUG&&this.setupDebug();window.addEventListener("resize",(()=>this.onWindowResize())),this.clusterCloud=new ut(this.loadManager,this._mainGroup,2,this.menu),this.exploreNav=new lt(this.gotoChapter),this.setupChapters(),this.landingEnterHitArea=document.querySelector(".LandingEnter-hitArea"),this.landingEnterHitArea.addEventListener("click",this.enterLanding),this.diamondMouseEnter=new x(this.MouseMoveTracker,document.querySelector(".LandingEnter-largeDiamond"),.15,this.landingEnterHitArea),this.clickMouseEnter=new x(this.MouseMoveTracker,document.querySelector(".LandingEnter"),.3,this.landingEnterHitArea)};setupChapters(){const t=document.querySelectorAll(".ChapterIntro"),e=document.body.querySelectorAll(".ExploreNav a"),i=new rt(this.menu,this._camera,this.cameraWrapper,this._mainGroup,this.cameraLookAtPoint,this.exploreButton,t[0],this.chapterPOITitles.splice(0,2),1,this,e[0]),o=new et(this.menu,this._camera,this.cameraWrapper,this._mainGroup,this.cameraLookAtPoint,this.exploreButton,t[1],this.chapterPOITitles.splice(0,2),2,this,e[1]),s=new ht(this.menu,this._camera,this.cameraWrapper,this._mainGroup,this.cameraLookAtPoint,this.exploreButton,t[2],this.chapterPOITitles.splice(0,2),3,this,e[2]),a=new pt(this.menu,this._camera,this.cameraWrapper,this._mainGroup,this.cameraLookAtPoint,this.exploreButton,t[3],this.chapterPOITitles.splice(0,2),4,this,e[3]),n=new ct(this.menu,this._camera,this.cameraWrapper,this._mainGroup,this.cameraLookAtPoint,this.exploreButton,t[4],this.chapterPOITitles.splice(0,2),5,this,e[4]);this.chapters.push(i),this.chapters.push(o),this.chapters.push(s),this.chapters.push(a),this.chapters.push(n),this.eye=new F(this._scene,this.postEffects,this.menu,this.loadManager),this.loadManager.setChapters(this.chapters),this.loadManager.startLoading()}loadDone=()=>{this._camera.position.z=-305,this._camera.fov=65,this.ambientAudio.loadAudio(),this.onWindowResize(!0),this.chapters.forEach((t=>t.loadDone())),this.playLoadDoneIntroAnimation(),this.activeExploreAnchor=this.chapters[0].exploreAnchor,m.GlobalsLanding.DEBUG&&this.setupDebugControls()};animate=()=>{this.requestAnimationFrameID=requestAnimationFrame(this.animate),m.GlobalsLanding.DEBUG&&this.stats.begin(),this.MouseMoveTracker.raf(),m.GlobalsLanding.VIDEO_OPEN||Dt.Globals.MENU_OPEN||(this._camera.position.x=this.mouseMoveAmount*this.MouseMoveTracker.pos.xEased,this._camera.position.y=this.mouseMoveAmount*this.MouseMoveTracker.pos.yEased,this.postEffects.godRaysEffect&&0==this.landingSkipped&&(this.spotLight.position.y=2.24+1*this.MouseMoveTracker.pos.yEased,this.spotLight.position.x=2.27+3*this.MouseMoveTracker.pos.xEased,this.postEffects.godRaysEffect.godRaysMaterial.uniforms.decay.value=.88+.05*(1-this.MouseMoveTracker.pos.distanceFromCenter)),this.cameraLookAtPoint.position.x=this.mousePanAmount*(-1*this.MouseMoveTracker.pos.xEased),this.cameraLookAtPoint.position.y=this.mousePanAmount*(-1*this.MouseMoveTracker.pos.yEased),this.cameraLookAtPoint.getWorldPosition(this._cameraLookAtVector),this._camera.lookAt(this._cameraLookAtVector),this._camera.updateProjectionMatrix(),this._camera.updateMatrixWorld(),this.activeExploreAnchor&&this.exploreButton.updateScreenPosition(this.activeExploreAnchor,this._camera,this.widthHalf,this.heightHalf),this.DEBUG_MODE?(this._controls.update(),this.DebugHelpers.forEach((t=>t.update())),this._renderer.render(this._scene,this.debugCamera)):this.postEffects.enabled?this.postEffects.render():this._renderer.render(this._scene,this._camera),m.GlobalsLanding.DEBUG&&this.stats.end())};onWindowResize=(t=!1)=>{var e=this.width,i=this.height;if(this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.width=this.ViewContainer.clientWidth,this.height=this.ViewContainer.clientHeight,m.GlobalsLanding.RENDERER_HEIGHT=this.height,(e!=this.width||i!=this.height||!0===t)&&(this._camera.aspect=this.width/this.height,!this.landingSkipped&&this._camera.aspect>=1.9?this._camera.zoom=this._camera.aspect-1.9+1+.15:this._camera.zoom=1,this._camera.updateProjectionMatrix(),this.widthHalf=this.width/2,this.heightHalf=this.height/2,this._renderer.setSize(this.width,this.height),this.postEffects.composer.setSize(this.width,this.height),this.MouseMoveTracker.resize(),this.scrollTriggerReady)){const t=this.scrollTrigger.progress;setTimeout((()=>{this.scrollTrigger.scroll(t*h.ScrollTrigger.maxScroll(this.scrollTrigger.scroller)),this.scrollTrigger.getTween().progress(1),h.ScrollTrigger.update(),this.scrollTrigger.refresh(),h.ScrollTrigger.update(),this.scrollTrigger.scroll(t*h.ScrollTrigger.maxScroll(this.scrollTrigger.scroller)),this.scrollTrigger.getTween().progress(1)}),1)}};setupLights(){this.dirLight=new o.DirectionalLight(16777215,.49),this.dirLight.position.set(0,1,-10),this.dirLight.lookAt(0,0,0),this._scene.add(this.dirLight),this.spotLight=new o.SpotLight(16777215,1,1),this.spotLight.intensity=1.853,this.spotLight.penumbra=0,this.spotLight.angle=1.571,this.spotLight.decay=-178,this.spotLight.power=5.58,this.spotLight.position.set(2.27,2.24,-305),this._scene.add(this.spotLight)}playLoadDoneIntroAnimation(){this.setupScrollTimeline(),this.chapters[0].chapterIntroClass.timeline.progress(1);var t=l.gsap.timeline({paused:!0,ease:"power4.inOut",delay:0,onComplete:()=>{document.getElementById("Loading").remove(),this.SKIP_INTRO&&setTimeout(this.enterLanding,100)}});t.add(this.eye.getIntroAnimation(),0),t.from(this._camera,{zoom:this._camera.zoom+2,duration:3,ease:"power3.inOut"},0),t.fromTo(this._camera.position,{z:-300},{z:-305,duration:4},0),t.call((()=>{this.diamondMouseEnter.enable(),this.clickMouseEnter.enable()}),null,3),t.set(this.landingEnterHitArea,{visibility:"visible"},4),(this.SKIP_LOAD_ANIMATION||this.SKIP_INTRO)&&t.timeScale(10),t.add((()=>{document.documentElement.classList.add("darkMenu")}),1.3),document.body.classList.add("loaded"),t.play()}enableScroll=()=>{this.ScrollSpacer.style.display="block",this.ScrollSpacer.style.height=100*this.scrollHeight+"%",this.ScrollSpacer.style.display="none",this.ScrollSpacer.offsetHeight,this.ScrollSpacer.style.display="block",h.ScrollTrigger.refresh(),this.scrollTriggerReady=!0};setupScrollTimeline=()=>{const t=m.GlobalsLanding.SCRUB_DURATION;if(this.chapters.forEach((t=>this.scrollHeight+=t.SCROLL_LENGTH)),this.USE_SCROLL_TIMER){const i=document.querySelector(".ScrollTimer-time");var e={time:parseFloat(i.textContent)};l.gsap.to(e,{scrollTrigger:{scrub:t,start:"0%",end:"100%"},time:"+=1001",ease:"none",onUpdate:()=>{i.textContent=e.time.toFixed(3)}})}const i=l.gsap.timeline({scrollTrigger:{scrub:t,start:"0%",end:"100%"}});i.to(this,{currentMasterScrollProgress:1,duration:1,ease:"none"},0),this.scrollTrigger=i.scrollTrigger;this.chapters.length;let o=0;var s=[],a=0;this.chapters.forEach(((t,e)=>{const n=t.setupScrollTimeline(),r=t.SCROLL_LENGTH/this.scrollHeight;this.chapterPositions.push(a),a+=t.SCROLL_LENGTH,s.push(r),i.to(n,{progress:1,ease:"none",duration:r},o-t.CHAPTER_OFFSET),o+=r})),1!==i.totalDuration()&&ft.warn("Total timeline length is not == 1, somethings wonky"),this.exploreNav.setupTimeline(s),i.to(this.exploreNav.timeline,{progress:1,ease:"none",duration:i.totalDuration()},0);let n=this._camera.position.clone(),r=this._camera.rotation.clone();this._camera.position.set(-.09324138656189779,.5441061764985087,-209.02427365941497),this._camera.rotation.set(3.1411942241032187,.0006787114349817719,-3.141592383171151),this._camera.updateProjectionMatrix(),this._camera.updateMatrixWorld(!0),this._camera.updateMatrix(),this._camera.updateWorldMatrix(!0,!0),this.chapters.forEach((t=>t.sortPointsData())),this._camera.position.copy(n),this._camera.rotation.copy(r),l.gsap.set(this.exploreButton.container,{opacity:0,force3D:!0})};gotoChapter=t=>{if(t<this.chapters.length)var e=0===t?0:this.chapterPositions[t]*this.height+.8*this.height;else e=this.scrollHeight*this.height;m.GlobalsLanding.USE_STICKY?l.gsap.to(this.AppContainer,{duration:1,scrollTo:{y:e}}):l.gsap.to(window,{duration:1,scrollTo:{y:e}})};enterLanding=()=>{window.ROTATING_BANNERS?window.ROTATING_BANNERS.selfDestroy():l.gsap.to("#StickyOverlay .startScreenTrailer",{autoAlpha:0,duration:.4}),this.landingEnterHitArea.removeEventListener("click",this.enterLanding),this.landingEnterHitArea.style.display="none",this.landingSkipped=!0,this.clickMouseEnter.disable(),this.diamondMouseEnter.disable(),this.ambientAudio.enableAudio();const t=this.chapters[0];l.gsap.to(".LandingMenuIntroWrapper",{autoAlpha:0,duration:.4});var e=l.gsap.timeline({paused:!0,onComplete:this.enableScroll});e.add(this.eye.getScrollInAnimation()),e.to(t.chapterIntroClass.timeline,{progress:0,duration:2.5,ease:"sine.inOut"},4),e.to(".ExploreNav",{autoAlpha:1,duration:2},3),e.to(".ChapterPOIs",{autoAlpha:1,duration:2},3),e.to(".BottomBar-right",{autoAlpha:1,duration:2},3),this.USE_SCROLL_TIMER&&e.to(".ScrollTimer",{opacity:1,duration:2},3),e.to(this.introDollyZoom,{duration:2,ease:"power3.inOut",totalProgress:1,onUpdate:()=>this.introDollyZoom.update(15,-25)},3),e.to(this.cameraWrapper.position,{z:8,ease:"power4.inOut",duration:4},3),e.to(this._camera,{zoom:1,duration:2,ease:"power3.inOut"},3),e.to(this,{mousePanAmount:2,mouseMoveAmount:2,duration:2,ease:"power3.inOut"},3),e.to(".ScrollHelpIndicator",{opacity:1,duration:1},6),e.from(t.ringsMaterial.uniforms.maxOpacity,{duration:2,value:0},3),e.add((()=>{document.documentElement.classList.remove("darkMenu")}),2.8),e.play(),this.SKIP_INTRO&&e.timeScale(10)};setupDebugControls(){var t=!0;window.addEventListener("keyup",(e=>{if("h"==e.key&&document.body.classList.toggle("hide-debug"),"d"==e.key){if(t){t=!1;var i=new o.CameraHelper(this._camera);this.DebugHelpers.push(i),this._scene.add(i),this.debugCamera.position.copy(this._camera.position),this.cameraLookAtPoint.add(new o.Mesh(new o.SphereBufferGeometry(1),new o.MeshBasicMaterial({color:1672e4})))}this.DEBUG_MODE=!this.DEBUG_MODE,this.DEBUG_MODE?document.body.classList.add("camera-debug"):document.body.classList.remove("camera-debug"),this._controls.enabled=this.DEBUG_MODE}}))}setupDebug(){document.body.classList.add("show-fps"),this.debugCamera=new o.PerspectiveCamera(45,this.width/this.height,1,8e3),this.menu.add(this._camera,"fov").min(0).max(179.99).step(.1).onChange((t=>{this._camera.fov=t,this._camera.updateProjectionMatrix()})),this.menu.add(this._camera,"far").min(0).max(200).step(.1).onChange((t=>{this._camera.far=t,this._camera.updateProjectionMatrix()})),this.debugCamera.position.z=300,this._controls=new d.OrbitControls(this.debugCamera,this._renderer.domElement),this._controls.target.set(0,0,0),this._controls.zoomSpeed=.1,this._controls.enabled=this.DEBUG_MODE,this.stats=(0,s.default)(),document.body.appendChild(this.stats.dom),this.menu.close(),window.THREE=o,window.scene=this._scene}kill=()=>{cancelAnimationFrame(this.requestAnimationFrameID)}}}}]);